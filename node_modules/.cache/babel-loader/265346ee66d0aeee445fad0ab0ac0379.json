{"ast":null,"code":"import _slicedToArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{generatePath,Link,useNavigate}from'react-router-dom';import{AppRoute,indexSelect}from'../const';import{useAppSelector}from'../hooks/hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PageHeader(){var boughtGuitars=useAppSelector(function(_ref){var DATA=_ref.DATA;return DATA.boughtGuitars;});var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSearch=_useState2[0],setIsSearch=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var _useAppSelector=useAppSelector(function(_ref2){var DATA=_ref2.DATA;return DATA;}),guitars=_useAppSelector.guitars;var onFormClickHandler=function onFormClickHandler(evt){evt.stopPropagation();setIsSearch(true);};var onFormBlurHandler=function onFormBlurHandler(evt){var _evt$relatedTarget;var elementClass=String((_evt$relatedTarget=evt.relatedTarget)===null||_evt$relatedTarget===void 0?void 0:_evt$relatedTarget.getAttribute('class'));if(!(elementClass.includes('form-search__select-item')||elementClass.includes('form-search__select-list'))){setIsSearch(false);}else{evt.preventDefault();evt.stopPropagation();}};var onInputChangeHandler=function onInputChangeHandler(evt){setText(evt.currentTarget.value);};return/*#__PURE__*/_jsx(\"header\",{className:\"header\",id:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container header__wrapper\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"header__logo logo\",children:/*#__PURE__*/_jsx(\"img\",{className:\"logo__img\",width:\"70\",height:\"70\",src:\"./img/svg/logo.svg\",alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsx(\"nav\",{className:\"main-nav\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"main-nav__list\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:\"link main-nav__link\",to:AppRoute.Page1,children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:\"link main-nav__link\",to:AppRoute.Where,children:\"\\u0413\\u0434\\u0435 \\u043A\\u0443\\u043F\\u0438\\u0442\\u044C?\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:\"link main-nav__link\",to:AppRoute.Company,children:\"\\u041E \\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u0438\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-search\",onClick:onFormClickHandler,onBlur:onFormBlurHandler,children:[/*#__PURE__*/_jsxs(\"form\",{className:\"form-search__form\",id:\"form-search\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"form-search__submit\",type:\"submit\",disabled:true,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"form-search__icon\",width:\"14\",height:\"15\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"use\",{href:\"#icon-search\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u043F\\u043E\\u0438\\u0441\\u043A\"})]}),/*#__PURE__*/_jsx(\"input\",{className:\"form-search__input\",id:\"search\",type:\"text\",autoComplete:\"off\",placeholder:\"\\u0447\\u0442\\u043E \\u0432\\u044B \\u0438\\u0449\\u0438\\u0442\\u0435?\",value:text,onChange:onInputChangeHandler,tabIndex:indexSelect-1}),/*#__PURE__*/_jsx(\"label\",{className:\"visually-hidden\",htmlFor:\"search\",children:\"\\u041F\\u043E\\u0438\\u0441\\u043A\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"form-search__select-list \".concat(isSearch?'':'hidden'),children:guitars.filter(function(el){return el.name.toLowerCase().includes(text.toLowerCase());}).map(function(el){return/*#__PURE__*/_jsxs(\"li\",{className:\"form-search__select-item\",tabIndex:indexSelect,onKeyPress:function onKeyPress(evt){if(evt.key==='Enter'){navigate(generatePath(AppRoute.Details,{id:String(el.id)}));}},onClick:function onClick(){return navigate(generatePath(AppRoute.Details,{id:String(el.id)}));},children:[\" \",el.name]},el.id);})}),/*#__PURE__*/_jsxs(\"button\",{className:\"form-search__reset\",type:\"reset\",form:\"form-search\",onClick:function onClick(){return setText('');},children:[/*#__PURE__*/_jsx(\"svg\",{className:\"form-search__icon\",width:\"14\",height:\"15\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"use\",{href:\"#icon-close\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u043E\\u0438\\u0441\\u043A\"})]})]}),/*#__PURE__*/_jsxs(Link,{className:\"header__cart-link\",to:AppRoute.Basket,\"aria-label\":\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"header__cart-icon\",width:\"14\",height:\"14\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"use\",{href:\"#icon-basket\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"}),\" \",boughtGuitars.length>0?/*#__PURE__*/_jsx(\"span\",{className:\"header__cart-count\",children:boughtGuitars.reduce(function(sum,elem){if(elem.quantity){return sum+elem.quantity;}else{return sum;}},0)}):'']})]})});}export default PageHeader;","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/components/page-header.tsx"],"names":["useState","generatePath","Link","useNavigate","AppRoute","indexSelect","useAppSelector","PageHeader","boughtGuitars","DATA","navigate","isSearch","setIsSearch","text","setText","guitars","onFormClickHandler","evt","stopPropagation","onFormBlurHandler","elementClass","String","relatedTarget","getAttribute","includes","preventDefault","onInputChangeHandler","currentTarget","value","Page1","Where","Company","filter","el","name","toLowerCase","map","key","Details","id","Basket","length","reduce","sum","elem","quantity"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { generatePath, Link, useNavigate } from 'react-router-dom';\nimport { AppRoute, indexSelect } from '../const';\nimport { useAppSelector } from '../hooks/hooks';\n\nfunction PageHeader(): JSX.Element {\n  const boughtGuitars = useAppSelector(({ DATA }) => DATA.boughtGuitars);\n  const navigate = useNavigate();\n  const [isSearch, setIsSearch] = useState<boolean>(false);\n  const [text, setText] = useState<string>('');\n\n  const { guitars } = useAppSelector(({ DATA }) => DATA);\n  const onFormClickHandler = (evt: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    evt.stopPropagation();\n    setIsSearch(true);\n  };\n\n  const onFormBlurHandler = (evt: React.FocusEvent<HTMLDivElement>) => {\n    const elementClass = String(evt.relatedTarget?.getAttribute('class'));\n    if (!(elementClass.includes('form-search__select-item') || elementClass.includes('form-search__select-list'))) {\n      setIsSearch(false);\n    } else {\n      evt.preventDefault();\n      evt.stopPropagation();\n    }\n  };\n\n  const onInputChangeHandler = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    setText(evt.currentTarget.value);\n  };\n\n  return (\n    <header className=\"header\" id=\"header\">\n      <div className=\"container header__wrapper\"><a className=\"header__logo logo\"><img className=\"logo__img\" width=\"70\" height=\"70\" src=\"./img/svg/logo.svg\" alt=\"Логотип\" /></a>\n        <nav className=\"main-nav\">\n          <ul className=\"main-nav__list\">\n            <li><Link className=\"link main-nav__link\" to={AppRoute.Page1} >Каталог</Link>\n            </li>\n            <li><Link className=\"link main-nav__link\" to={AppRoute.Where}>Где купить?</Link>\n            </li>\n            <li><Link className=\"link main-nav__link\" to={AppRoute.Company}>О компании</Link>\n            </li>\n          </ul>\n        </nav>\n        <div className=\"form-search\" onClick={onFormClickHandler} onBlur={onFormBlurHandler} >\n          <form className=\"form-search__form\" id=\"form-search\">\n            <button className=\"form-search__submit\" type=\"submit\" disabled>\n              <svg className=\"form-search__icon\" width=\"14\" height=\"15\" aria-hidden=\"true\">\n                <use href=\"#icon-search\"></use>\n              </svg><span className=\"visually-hidden\">Начать поиск</span>\n            </button>\n            <input className=\"form-search__input\" id=\"search\" type=\"text\" autoComplete=\"off\" placeholder=\"что вы ищите?\" value={text} onChange={onInputChangeHandler} tabIndex={indexSelect - 1} />\n            <label className=\"visually-hidden\" htmlFor=\"search\">Поиск</label>\n          </form>\n          <ul className={`form-search__select-list ${isSearch ? '' : 'hidden'}`}>\n            {guitars\n              .filter((el) => el.name.toLowerCase().includes(text.toLowerCase()))\n              .map((el) => (\n                <li key={el.id} className=\"form-search__select-item\" tabIndex={indexSelect}\n                  onKeyPress={(evt) => {\n                    if (evt.key === 'Enter') {\n                      navigate(generatePath(AppRoute.Details, { id: String(el.id) }));\n                    }\n                  }}\n                  onClick={() => navigate(generatePath(AppRoute.Details, { id: String(el.id) }))}\n                > {el.name}\n                </li>))}\n          </ul>\n          <button className=\"form-search__reset\" type=\"reset\" form=\"form-search\" onClick={() => setText('')}>\n            <svg className=\"form-search__icon\" width=\"14\" height=\"15\" aria-hidden=\"true\">\n              <use href=\"#icon-close\"></use>\n            </svg><span className=\"visually-hidden\">Сбросить поиск</span>\n          </button>\n        </div>\n        <Link className=\"header__cart-link\" to={AppRoute.Basket} aria-label=\"Корзина\">\n          <svg className=\"header__cart-icon\" width=\"14\" height=\"14\" aria-hidden=\"true\">\n            <use href=\"#icon-basket\"></use>\n          </svg>\n          <span className=\"visually-hidden\">Перейти в корзину</span> {boughtGuitars.length > 0 ?\n            <span className=\"header__cart-count\">\n              {boughtGuitars.reduce((sum, elem) => {\n                if (elem.quantity) { return sum + elem.quantity; }\n                else { return sum; }\n              }, 0)}\n            </span> : ''}\n        </Link>\n      </div>\n    </header>\n  );\n}\n\nexport default PageHeader;\n"]},"metadata":{},"sourceType":"module"}