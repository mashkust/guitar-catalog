{"ast":null,"code":"var _jsxFileName = \"/Users/mashkust/react-starter-pack-main/src/components/basket-page.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PageHeader from './page-header';\nimport PageFooter from './page-footer';\nimport { AppRoute } from '../const';\nimport { Link } from 'react-router-dom';\nimport BasketCard from './basket-card';\nimport { useAppDispatch, useAppSelector } from '../hooks/hooks';\nimport { postCouponAction, postOrdersAction } from '../store/api-actions';\nimport { setIsDisconnect } from '../store/guitar-data';\nimport BasketRemoval from './basket-removal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { createElement as _createElement } from \"react\";\n\nfunction BasketPage() {\n  _s();\n\n  const boughtGuitars = useAppSelector(_ref => {\n    let {\n      DATA\n    } = _ref;\n    return DATA.boughtGuitars;\n  });\n  const isGuitar = useAppSelector(_ref2 => {\n    let {\n      DATA\n    } = _ref2;\n    return DATA.isGuitar;\n  });\n  const isBasketRemoval = useAppSelector(_ref3 => {\n    let {\n      DATA\n    } = _ref3;\n    return DATA.isBasketRemoval;\n  });\n  const isCoupon = useAppSelector(_ref4 => {\n    let {\n      DATA\n    } = _ref4;\n    return DATA.isCoupon;\n  });\n  const dispatch = useAppDispatch();\n  const [coupon, setCoupon] = useState('');\n  const [isValidationCoupon, setIsValidationCoupon] = useState(false); // const oldBoughtGuitars = localStorage.getItem('BoughtGuitars');\n  // dispatch(buyGuitar(oldBoughtGuitars.))\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"page-content \",\n      children: [isGuitar ? isBasketRemoval && /*#__PURE__*/_jsxDEV(BasketRemoval, {\n        guitar: isGuitar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 40\n      }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"page-content__title title title--bigger\",\n          children: \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"breadcrumbs page-content__breadcrumbs page-content__breadcrumbs--on-cart-page\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"breadcrumbs__item\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              className: \"link\",\n              to: AppRoute.Page1,\n              children: \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 33,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"breadcrumbs__item\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              className: \"link\",\n              to: AppRoute.Page1,\n              children: \"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"breadcrumbs__item\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"link\",\n              children: \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart\",\n          children: [boughtGuitars.length !== 0 ? boughtGuitars.map(guitar => /*#__PURE__*/_createElement(BasketCard, {\n            guitar,\n            key: guitar.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 15\n            }\n          })) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart__footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart__coupon coupon\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"title title--little coupon__title\",\n                children: \"\\u041F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434 \\u043D\\u0430 \\u0441\\u043A\\u0438\\u0434\\u043A\\u0443\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 45,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"coupon__info\",\n                children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u043F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434, \\u0435\\u0441\\u043B\\u0438 \\u043E\\u043D \\u0443 \\u0432\\u0430\\u0441 \\u0435\\u0441\\u0442\\u044C.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 46,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"coupon__form\",\n                id: \"coupon-form\",\n                onSubmit: evt => {\n                  evt.preventDefault(); // if (typeof coupon === 'CouponTypes') {\n\n                  dispatch(postCouponAction({\n                    coupon: coupon\n                  })); // }\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-input coupon__input\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"visually-hidden\",\n                    children: \"\\u041F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 58,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434\",\n                    id: \"coupon\",\n                    name: \"coupon\",\n                    value: coupon,\n                    onChange: evt => {\n                      setCoupon(evt.currentTarget.value);\n                      setIsValidationCoupon(false);\n\n                      if (evt.currentTarget.value === ' ') {\n                        evt.currentTarget.value = '';\n                      }\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 59,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: isValidationCoupon ? 'form-input__message form-input__message--success' : 'form-input__message form-input__message--error',\n                    children: [\" \", isValidationCoupon ? 'Промокод принят' : 'Неверный промокод']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 68,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 57,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"button button--big coupon__button\",\n                  onClick: () => {\n                    setIsValidationCoupon(true);\n                  },\n                  children: \"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart__total-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"cart__total-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"cart__total-value-name\",\n                  children: \"\\u0412\\u0441\\u0435\\u0433\\u043E:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"cart__total-value\",\n                  children: [boughtGuitars.reduce((sum, elem) => {\n                    if (elem.quantity) {\n                      return sum + elem.price * elem.quantity;\n                    } else {\n                      return sum + elem.price;\n                    }\n                  }, 0), \" \\u20BD\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"cart__total-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"cart__total-value-name\",\n                  children: \"\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"cart__total-value cart__total-value--bonus\",\n                  children: \"- 3000 \\u20BD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 104\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"cart__total-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"cart__total-value-name\",\n                  children: \"\\u041A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0435:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"cart__total-value cart__total-value--payment\",\n                  children: [boughtGuitars.reduce((sum, elem) => {\n                    if (elem.quantity) {\n                      return sum + elem.price * elem.quantity;\n                    } else {\n                      return sum + elem.price;\n                    }\n                  }, 0), \" \\u20BD\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"button button--red button--big cart__order-button\",\n                onClick: () => {\n                  dispatch(postOrdersAction({\n                    guitarsIds: boughtGuitars.map(guitar => guitar.id),\n                    coupon: null\n                  }));\n                  dispatch(setIsDisconnect(navigator.onLine));\n                },\n                children: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PageFooter, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n}\n\n_s(BasketPage, \"JfYlDD4rcG4Z/gOBL3kTxgqSN+4=\", false, function () {\n  return [useAppSelector, useAppSelector, useAppSelector, useAppSelector, useAppDispatch];\n});\n\n_c = BasketPage;\nexport default BasketPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"BasketPage\");","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/components/basket-page.tsx"],"names":["React","useState","PageHeader","PageFooter","AppRoute","Link","BasketCard","useAppDispatch","useAppSelector","postCouponAction","postOrdersAction","setIsDisconnect","BasketRemoval","BasketPage","boughtGuitars","DATA","isGuitar","isBasketRemoval","isCoupon","dispatch","coupon","setCoupon","isValidationCoupon","setIsValidationCoupon","Page1","length","map","guitar","id","evt","preventDefault","currentTarget","value","reduce","sum","elem","quantity","price","guitarsIds","navigator","onLine"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,SAASC,QAAT,QAAyB,UAAzB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,gBAA/C;AAEA,SAASC,gBAAT,EAA2BC,gBAA3B,QAAmD,sBAAnD;AACA,SAAsBC,eAAtB,QAA6C,sBAA7C;AACA,OAAOC,aAAP,MAA0B,kBAA1B;;;;AAGA,SAASC,UAAT,GAAmC;AAAA;;AACjC,QAAMC,aAAa,GAAGN,cAAc,CAAC;AAAA,QAAC;AAAEO,MAAAA;AAAF,KAAD;AAAA,WAAcA,IAAI,CAACD,aAAnB;AAAA,GAAD,CAApC;AACA,QAAME,QAAQ,GAAGR,cAAc,CAAC;AAAA,QAAC;AAAEO,MAAAA;AAAF,KAAD;AAAA,WAAcA,IAAI,CAACC,QAAnB;AAAA,GAAD,CAA/B;AACA,QAAMC,eAAe,GAAGT,cAAc,CAAC;AAAA,QAAC;AAAEO,MAAAA;AAAF,KAAD;AAAA,WAAcA,IAAI,CAACE,eAAnB;AAAA,GAAD,CAAtC;AACA,QAAMC,QAAQ,GAAGV,cAAc,CAAC;AAAA,QAAC;AAAEO,MAAAA;AAAF,KAAD;AAAA,WAAcA,IAAI,CAACG,QAAnB;AAAA,GAAD,CAA/B;AACA,QAAMC,QAAQ,GAAGZ,cAAc,EAA/B;AAEA,QAAM,CAACa,MAAD,EAASC,SAAT,IAAsBpB,QAAQ,CAAS,EAAT,CAApC;AACA,QAAM,CAACqB,kBAAD,EAAqBC,qBAArB,IAA8CtB,QAAQ,CAAU,KAAV,CAA5D,CARiC,CASjC;AACA;;AACA,sBACE,QAAC,KAAD,CAAO,QAAP;AAAA,4BACE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAM,MAAA,SAAS,EAAC,eAAhB;AAAA,iBACGe,QAAQ,GAAGC,eAAe,iBAAI,QAAC,aAAD;AAAe,QAAA,MAAM,EAAED;AAAvB;AAAA;AAAA;AAAA;AAAA,cAAtB,GAA4D,EADvE,eAEE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,yCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAI,UAAA,SAAS,EAAC,+EAAd;AAAA,kCACE;AAAI,YAAA,SAAS,EAAC,mBAAd;AAAA,mCAAkC,QAAC,IAAD;AAAM,cAAA,SAAS,EAAC,MAAhB;AAAuB,cAAA,EAAE,EAAEZ,QAAQ,CAACoB,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAlC;AAAA;AAAA;AAAA;AAAA,kBADF,eAGE;AAAI,YAAA,SAAS,EAAC,mBAAd;AAAA,mCAAkC,QAAC,IAAD;AAAM,cAAA,SAAS,EAAC,MAAhB;AAAuB,cAAA,EAAE,EAAEpB,QAAQ,CAACoB,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAlC;AAAA;AAAA;AAAA;AAAA,kBAHF,eAKE;AAAI,YAAA,SAAS,EAAC,mBAAd;AAAA,mCAAkC;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAlC;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAUE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,qBACGV,aAAa,CAACW,MAAd,KAAyB,CAAzB,GAA6BX,aAAa,CAACY,GAAd,CAAmBC,MAAD,iBAC9C,eAAC,UAAD;AAAkBA,YAAAA,MAAlB;AAA4B,YAAA,GAAG,EAAEA,MAAM,CAACC,EAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAD4B,CAA7B,GACoD,EAFvD,eAGE;AAAK,YAAA,SAAS,EAAC,cAAf;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,qBAAf;AAAA,sCACE;AAAI,gBAAA,SAAS,EAAC,mCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAG,gBAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF,eAGE;AAAM,gBAAA,SAAS,EAAC,cAAhB;AAA+B,gBAAA,EAAE,EAAC,aAAlC;AACE,gBAAA,QAAQ,EAAGC,GAAD,IAA2C;AACnDA,kBAAAA,GAAG,CAACC,cAAJ,GADmD,CAEnD;;AACEX,kBAAAA,QAAQ,CAACV,gBAAgB,CAAC;AACxBW,oBAAAA,MAAM,EAAEA;AADgB,mBAAD,CAAjB,CAAR,CAHiD,CAMnD;AACD,iBARH;AAAA,wCAUE;AAAK,kBAAA,SAAS,EAAC,0BAAf;AAAA,0CACE;AAAO,oBAAA,SAAS,EAAC,iBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAO,oBAAA,IAAI,EAAC,MAAZ;AAAmB,oBAAA,WAAW,EAAC,6FAA/B;AAAkD,oBAAA,EAAE,EAAC,QAArD;AAA8D,oBAAA,IAAI,EAAC,QAAnE;AAA4E,oBAAA,KAAK,EAAEA,MAAnF;AACE,oBAAA,QAAQ,EAAGS,GAAD,IAA8C;AACtDR,sBAAAA,SAAS,CAACQ,GAAG,CAACE,aAAJ,CAAkBC,KAAnB,CAAT;AACAT,sBAAAA,qBAAqB,CAAC,KAAD,CAArB;;AACA,0BAAIM,GAAG,CAACE,aAAJ,CAAkBC,KAAlB,KAA4B,GAAhC,EAAqC;AACnCH,wBAAAA,GAAG,CAACE,aAAJ,CAAkBC,KAAlB,GAA0B,EAA1B;AACD;AACF;AAPH;AAAA;AAAA;AAAA;AAAA,0BAFF,eAWE;AAAG,oBAAA,SAAS,EAAEV,kBAAkB,GAAG,kDAAH,GAAwD,gDAAxF;AAAA,oCAA6IA,kBAAkB,GAAG,iBAAH,GAAuB,mBAAtL;AAAA;AAAA;AAAA;AAAA;AAAA,0BAXF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVF,eAuBE;AAAQ,kBAAA,SAAS,EAAC,mCAAlB;AACE,kBAAA,OAAO,EAAE,MAAM;AACbC,oBAAAA,qBAAqB,CAAC,IAAD,CAArB;AACD,mBAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAvBF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAmCE;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA,sCACE;AAAG,gBAAA,SAAS,EAAC,kBAAb;AAAA,wCAAgC;AAAM,kBAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAhC,eACE;AAAM,kBAAA,SAAS,EAAC,mBAAhB;AAAA,6BAAqCT,aAAa,CAACmB,MAAd,CAAqB,CAACC,GAAD,EAAMC,IAAN,KAAe;AACvE,wBAAIA,IAAI,CAACC,QAAT,EAAmB;AAAE,6BAAOF,GAAG,GAAGC,IAAI,CAACE,KAAL,GAAaF,IAAI,CAACC,QAA/B;AAA0C,qBAA/D,MACK;AAAE,6BAAOF,GAAG,GAAGC,IAAI,CAACE,KAAlB;AAA0B;AAClC,mBAHoC,EAGlC,CAHkC,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAQE;AAAG,gBAAA,SAAS,EAAC,kBAAb;AAAA,wCAAgC;AAAM,kBAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAhC,eAAuF;AAAM,kBAAA,SAAS,EAAC,4CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAvF;AAAA;AAAA;AAAA;AAAA;AAAA,sBARF,eASE;AAAG,gBAAA,SAAS,EAAC,kBAAb;AAAA,wCAAgC;AAAM,kBAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAhC,eACE;AAAM,kBAAA,SAAS,EAAC,8CAAhB;AAAA,6BAAgEvB,aAAa,CAACmB,MAAd,CAAqB,CAACC,GAAD,EAAMC,IAAN,KAAe;AAClG,wBAAIA,IAAI,CAACC,QAAT,EAAmB;AAAE,6BAAOF,GAAG,GAAGC,IAAI,CAACE,KAAL,GAAaF,IAAI,CAACC,QAA/B;AAA0C,qBAA/D,MACK;AAAE,6BAAOF,GAAG,GAAGC,IAAI,CAACE,KAAlB;AAA0B;AAClC,mBAH+D,EAG7D,CAH6D,CAAhE;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF;AAAA;AAAA;AAAA;AAAA;AAAA,sBATF,eAgBE;AAAQ,gBAAA,SAAS,EAAC,mDAAlB;AACE,gBAAA,OAAO,EAAE,MAAM;AACblB,kBAAAA,QAAQ,CAACT,gBAAgB,CAAC;AACxB4B,oBAAAA,UAAU,EAAExB,aAAa,CAACY,GAAd,CAAmBC,MAAD,IAAoBA,MAAM,CAACC,EAA7C,CADY;AAExBR,oBAAAA,MAAM,EAAE;AAFgB,mBAAD,CAAjB,CAAR;AAIAD,kBAAAA,QAAQ,CAAER,eAAe,CAAC4B,SAAS,CAACC,MAAX,CAAjB,CAAR;AACD,iBAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAnCF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAmFE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YAnFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAuFD;;GAlGQ3B,U;UACeL,c,EACLA,c,EACOA,c,EACPA,c,EACAD,c;;;KALVM,U;AAoGT,eAAeA,UAAf","sourcesContent":["import React, { useState } from 'react';\nimport PageHeader from './page-header';\nimport PageFooter from './page-footer';\nimport { AppRoute } from '../const';\nimport { Link } from 'react-router-dom';\nimport BasketCard from './basket-card';\nimport { useAppDispatch, useAppSelector } from '../hooks/hooks';\nimport { Guitar } from '../types/types';\nimport { postCouponAction, postOrdersAction } from '../store/api-actions';\nimport { setIsCoupon, setIsDisconnect } from '../store/guitar-data';\nimport BasketRemoval from './basket-removal';\nimport { CouponTypes } from '../types/types';\n\nfunction BasketPage(): JSX.Element {\n  const boughtGuitars = useAppSelector(({ DATA }) => DATA.boughtGuitars);\n  const isGuitar = useAppSelector(({ DATA }) => DATA.isGuitar);\n  const isBasketRemoval = useAppSelector(({ DATA }) => DATA.isBasketRemoval);\n  const isCoupon = useAppSelector(({ DATA }) => DATA.isCoupon);\n  const dispatch = useAppDispatch();\n\n  const [coupon, setCoupon] = useState<string>('');\n  const [isValidationCoupon, setIsValidationCoupon] = useState<boolean>(false);\n  // const oldBoughtGuitars = localStorage.getItem('BoughtGuitars');\n  // dispatch(buyGuitar(oldBoughtGuitars.))\n  return (\n    <React.Fragment>\n      <PageHeader />\n      <main className=\"page-content \">\n        {isGuitar ? isBasketRemoval && <BasketRemoval guitar={isGuitar} /> : ''}\n        <div className=\"container\">\n          <h1 className=\"page-content__title title title--bigger\" >Корзина</h1>\n          <ul className=\"breadcrumbs page-content__breadcrumbs page-content__breadcrumbs--on-cart-page\">\n            <li className=\"breadcrumbs__item\"><Link className=\"link\" to={AppRoute.Page1}>Главная</Link>\n            </li>\n            <li className=\"breadcrumbs__item\"><Link className=\"link\" to={AppRoute.Page1}>Каталог</Link>\n            </li>\n            <li className=\"breadcrumbs__item\"><a className=\"link\">Корзина</a>\n            </li>\n          </ul>\n          <div className=\"cart\">\n            {boughtGuitars.length !== 0 ? boughtGuitars.map((guitar: Guitar) => (\n              <BasketCard {...{ guitar }} key={guitar.id} />)) : ''}\n            <div className=\"cart__footer\">\n              <div className=\"cart__coupon coupon\">\n                <h2 className=\"title title--little coupon__title\">Промокод на скидку</h2>\n                <p className=\"coupon__info\">Введите свой промокод, если он у вас есть.</p>\n                <form className=\"coupon__form\" id=\"coupon-form\"\n                  onSubmit={(evt: React.FormEvent<HTMLFormElement>) => {\n                    evt.preventDefault();\n                    // if (typeof coupon === 'CouponTypes') {\n                      dispatch(postCouponAction({\n                        coupon: coupon,\n                      }));\n                    // }\n                  }}\n                >\n                  <div className=\"form-input coupon__input\">\n                    <label className=\"visually-hidden\">Промокод</label>\n                    <input type=\"text\" placeholder=\"Введите промокод\" id=\"coupon\" name=\"coupon\" value={coupon}\n                      onChange={(evt: React.ChangeEvent<HTMLInputElement>) => {\n                        setCoupon(evt.currentTarget.value);\n                        setIsValidationCoupon(false);\n                        if (evt.currentTarget.value === ' ') {\n                          evt.currentTarget.value = '';\n                        }\n                      }}\n                    />\n                    <p className={isValidationCoupon ? 'form-input__message form-input__message--success' : 'form-input__message form-input__message--error'} > {isValidationCoupon ? 'Промокод принят' : 'Неверный промокод'}</p>\n                  </div>\n                  <button className=\"button button--big coupon__button\"\n                    onClick={() => {\n                      setIsValidationCoupon(true);\n                    }}\n                  >Применить\n                  </button>\n                </form>\n              </div>\n              <div className=\"cart__total-info\">\n                <p className=\"cart__total-item\"><span className=\"cart__total-value-name\">Всего:</span>\n                  <span className=\"cart__total-value\">{boughtGuitars.reduce((sum, elem) => {\n                    if (elem.quantity) { return sum + elem.price * elem.quantity; }\n                    else { return sum + elem.price; }\n                  }, 0)} ₽\n                  </span>\n                </p>\n                <p className=\"cart__total-item\"><span className=\"cart__total-value-name\">Скидка:</span><span className=\"cart__total-value cart__total-value--bonus\">- 3000 ₽</span></p>\n                <p className=\"cart__total-item\"><span className=\"cart__total-value-name\">К оплате:</span>\n                  <span className=\"cart__total-value cart__total-value--payment\">{boughtGuitars.reduce((sum, elem) => {\n                    if (elem.quantity) { return sum + elem.price * elem.quantity; }\n                    else { return sum + elem.price; }\n                  }, 0)} ₽\n                  </span>\n                </p>\n                <button className=\"button button--red button--big cart__order-button\"\n                  onClick={() => {\n                    dispatch(postOrdersAction({\n                      guitarsIds: boughtGuitars.map((guitar: Guitar) => guitar.id),\n                      coupon: null,\n                    }));\n                    dispatch((setIsDisconnect(navigator.onLine)));\n                  }}\n                >Оформить заказ\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n      <PageFooter />\n    </React.Fragment>\n  );\n}\n\nexport default BasketPage;\n"]},"metadata":{},"sourceType":"module"}