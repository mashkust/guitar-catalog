{"ast":null,"code":"import _objectSpread from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{createSlice}from'@reduxjs/toolkit';import{NameSpace}from'../const';import{sortByParams}from'../utils';import hashHistory from'../hash-history';import{toast}from'react-toastify';var initialState={guitars:[],guitar:null,comments:null,isDataLoaded:false,isDataSending:false,isSuccessModalOpened:false,isCommentModalOpened:false,isSorting:null,isSortInc:null,minPrice:null,maxPrice:null,selectedTypes:[],selectedStrings:[],filteredGuitarsLength:null,filteredPriceMin:null,filteredPriceMax:null,boughtGuitars:[],isDisconnect:true,isSuccessBasketModal:false,isBasketModalOpened:false,isGuitar:null,isBasketRemoval:false,isDiscount:0,isCoupon:null};export var guitarData=createSlice({name:NameSpace.data,initialState:initialState,reducers:{setIsSuccessModalOpened:function setIsSuccessModalOpened(state,action){state.isSuccessModalOpened=action.payload;},setIsCommentModalOpened:function setIsCommentModalOpened(state,action){state.isCommentModalOpened=action.payload;},setIsSorting:function setIsSorting(state,action){state.isSorting=action.payload;if(state.isSortInc===null){state.isSortInc=true;}var guitars=state.guitars,isSortInc=state.isSortInc,isSorting=state.isSorting;state.guitars=sortByParams({guitars:guitars,isSortInc:isSortInc,isSorting:isSorting});window.localStorage.setItem('sortType',String(isSorting));window.localStorage.setItem('sortDirection',String(isSortInc));hashHistory.push({search:\"sortType=\".concat(state.isSorting,\"?sortDirection=\").concat(state.isSortInc)});},setIsSortInc:function setIsSortInc(state,action){state.isSortInc=action.payload;if(state.isSorting===null){state.isSorting='price';}var guitars=state.guitars,isSortInc=state.isSortInc,isSorting=state.isSorting;state.guitars=sortByParams({guitars:guitars,isSortInc:isSortInc,isSorting:isSorting});window.localStorage.setItem('sortType',String(isSorting));window.localStorage.setItem('sortDirection',String(isSortInc));hashHistory.push({search:\"sortType=\".concat(isSorting,\"?sortDirection=\").concat(isSortInc)});},loadGuitars:function loadGuitars(state,action){state.guitars=action.payload;state.isDataLoaded=true;},loadGuitar:function loadGuitar(state,action){state.guitar=action.payload;},loadComments:function loadComments(state,action){state.comments=action.payload.sort(function(a,b){return new Date(b.createAt).getTime()-new Date(a.createAt).getTime();});if(action.payload[0]){var first=action.payload[0];if(action.payload.every(function(el){return Number(el.guitarId)===Number(first.guitarId);})){var guitar=state.guitars.find(function(el){return Number(el.id)===Number(first.guitarId);});if(guitar){guitar.commentsCount=action.payload.length;}}}},sendComment:function sendComment(state,action){state.isDataSending=action.payload;},setMinPrice:function setMinPrice(state,action){if(action.payload===null||action.payload===''||action.payload===undefined){window.localStorage.removeItem('minPrice');}state.minPrice=action.payload;},setMaxPrice:function setMaxPrice(state,action){if(action.payload===null||action.payload===''||action.payload===undefined){window.localStorage.removeItem('maxPrice');}state.maxPrice=action.payload;},setSelectedTypes:function setSelectedTypes(state,action){var selectedTypes=state.selectedTypes;var payload=action.payload;if(!payload){state.selectedTypes=[];}else{if(selectedTypes.includes(payload)){state.selectedTypes=selectedTypes.filter(function(el){return el!==payload;});}else{selectedTypes.push(payload);}var fUkulele=[];var fElectric=[];var fAcoustc=[];if(state.selectedTypes.length>0){if(state.selectedTypes.includes('electric')){fElectric=state.selectedStrings.filter(function(el){return el<12;});}if(state.selectedTypes.includes('ukulele')){fUkulele=state.selectedStrings.filter(function(el){return el<6;});}if(state.selectedTypes.includes('acoustic')){fAcoustc=state.selectedStrings.filter(function(el){return el>4;});}state.selectedStrings=Array.from(new Set([].concat(_toConsumableArray(fElectric),_toConsumableArray(fUkulele),_toConsumableArray(fAcoustc))));}if(state.selectedTypes.length===0){window.localStorage.removeItem('types');}if(state.selectedStrings.length===0){window.localStorage.removeItem('strings');}}},setTypesGroup:function setTypesGroup(state,action){state.selectedTypes=action.payload;},setStringsGroup:function setStringsGroup(state,action){state.selectedStrings=action.payload;},setSelectedStrings:function setSelectedStrings(state,action){var selectedStrings=state.selectedStrings;var payload=action.payload;if(!payload){state.selectedStrings=[];}else{if(selectedStrings.includes(payload)){state.selectedStrings=selectedStrings.filter(function(el){return el!==payload;});}else{selectedStrings.push(payload);}}if(state.selectedStrings.length===0){window.localStorage.removeItem('strings');}},setFilteredGuitarsLength:function setFilteredGuitarsLength(state,action){state.filteredGuitarsLength=action.payload;},setFilteredPriceMin:function setFilteredPriceMin(state,action){state.filteredPriceMin=action.payload;},setFilteredPriceMax:function setFilteredPriceMax(state,action){state.filteredPriceMax=action.payload;},buyGuitar:function buyGuitar(state,action){var boughtGuitars=state.boughtGuitars;var payload=action.payload;var boughtGuitar=state.boughtGuitars.find(function(el){return el.id===payload.id;});if(boughtGuitar){boughtGuitar.quantity=(boughtGuitar.quantity||0)+1;}else{var newGuitar=_objectSpread({},payload);newGuitar.quantity=1;boughtGuitars.push(newGuitar);}},deleteGuitar:function deleteGuitar(state,action){var boughtGuitars=state.boughtGuitars;var payload=action.payload;state.boughtGuitars=boughtGuitars.filter(function(el){return el.id!==payload;});},setQuantity:function setQuantity(state,action){var _action$payload=action.payload,id=_action$payload.id,quantity=_action$payload.quantity;var boughtGuitar=state.boughtGuitars.find(function(el){return el.id===id;});if(boughtGuitar){boughtGuitar.quantity=quantity==='inc'?(boughtGuitar.quantity||1)+1:(boughtGuitar.quantity||1)-1;if(boughtGuitar.quantity<1){state.isBasketRemoval=true;boughtGuitar.quantity=(boughtGuitar.quantity||0)+1;}}},setQuantityText:function setQuantityText(state,action){var _action$payload2=action.payload,id=_action$payload2.id,quantity=_action$payload2.quantity;var boughtGuitar=state.boughtGuitars.find(function(el){return el.id===id;});if(boughtGuitar){boughtGuitar.quantity=quantity;}},setIsDisconnect:function setIsDisconnect(state,action){state.isDisconnect=action.payload;if(!action.payload){toast.error('Internet disconnected');state.isDisconnect=true;}},setIsSuccessBasket:function setIsSuccessBasket(state,action){state.isSuccessBasketModal=action.payload;},setIsBasket:function setIsBasket(state,action){state.isBasketModalOpened=action.payload;},setIsGuitar:function setIsGuitar(state,action){state.isGuitar=action.payload;},setIsBasketRemoval:function setIsBasketRemoval(state,action){state.isBasketRemoval=action.payload;},setIsDiscount:function setIsDiscount(state,action){state.isDiscount=action.payload;},setIsCoupon:function setIsCoupon(state,action){state.isCoupon=action.payload;}}});var _guitarData$actions=guitarData.actions,loadGuitars=_guitarData$actions.loadGuitars,loadGuitar=_guitarData$actions.loadGuitar,loadComments=_guitarData$actions.loadComments,sendComment=_guitarData$actions.sendComment,setIsSuccessModalOpened=_guitarData$actions.setIsSuccessModalOpened,setIsCommentModalOpened=_guitarData$actions.setIsCommentModalOpened,setIsSorting=_guitarData$actions.setIsSorting,setIsSortInc=_guitarData$actions.setIsSortInc,setMinPrice=_guitarData$actions.setMinPrice,setMaxPrice=_guitarData$actions.setMaxPrice,setSelectedTypes=_guitarData$actions.setSelectedTypes,setSelectedStrings=_guitarData$actions.setSelectedStrings,setFilteredGuitarsLength=_guitarData$actions.setFilteredGuitarsLength,setFilteredPriceMin=_guitarData$actions.setFilteredPriceMin,setFilteredPriceMax=_guitarData$actions.setFilteredPriceMax,setStringsGroup=_guitarData$actions.setStringsGroup,setTypesGroup=_guitarData$actions.setTypesGroup,buyGuitar=_guitarData$actions.buyGuitar,setQuantity=_guitarData$actions.setQuantity,deleteGuitar=_guitarData$actions.deleteGuitar,setIsDisconnect=_guitarData$actions.setIsDisconnect,setIsBasket=_guitarData$actions.setIsBasket,setIsSuccessBasket=_guitarData$actions.setIsSuccessBasket,setIsGuitar=_guitarData$actions.setIsGuitar,setIsBasketRemoval=_guitarData$actions.setIsBasketRemoval,setIsDiscount=_guitarData$actions.setIsDiscount,setQuantityText=_guitarData$actions.setQuantityText,setIsCoupon=_guitarData$actions.setIsCoupon;export{loadGuitars,loadGuitar,loadComments,sendComment,setIsSuccessModalOpened,setIsCommentModalOpened,setIsSorting,setIsSortInc,setMinPrice,setMaxPrice,setSelectedTypes,setSelectedStrings,setFilteredGuitarsLength,setFilteredPriceMin,setFilteredPriceMax,setStringsGroup,setTypesGroup,buyGuitar,setQuantity,deleteGuitar,setIsDisconnect,setIsBasket,setIsSuccessBasket,setIsGuitar,setIsBasketRemoval,setIsDiscount,setQuantityText,setIsCoupon};","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/store/guitar-data.ts"],"names":["createSlice","NameSpace","sortByParams","hashHistory","toast","initialState","guitars","guitar","comments","isDataLoaded","isDataSending","isSuccessModalOpened","isCommentModalOpened","isSorting","isSortInc","minPrice","maxPrice","selectedTypes","selectedStrings","filteredGuitarsLength","filteredPriceMin","filteredPriceMax","boughtGuitars","isDisconnect","isSuccessBasketModal","isBasketModalOpened","isGuitar","isBasketRemoval","isDiscount","isCoupon","guitarData","name","data","reducers","setIsSuccessModalOpened","state","action","payload","setIsCommentModalOpened","setIsSorting","window","localStorage","setItem","String","push","search","setIsSortInc","loadGuitars","loadGuitar","loadComments","sort","a","b","Date","createAt","getTime","first","every","el","Number","guitarId","find","id","commentsCount","length","sendComment","setMinPrice","undefined","removeItem","setMaxPrice","setSelectedTypes","includes","filter","fUkulele","fElectric","fAcoustc","Array","from","Set","setTypesGroup","setStringsGroup","setSelectedStrings","setFilteredGuitarsLength","setFilteredPriceMin","setFilteredPriceMax","buyGuitar","boughtGuitar","quantity","newGuitar","deleteGuitar","setQuantity","setQuantityText","setIsDisconnect","error","setIsSuccessBasket","setIsBasket","setIsGuitar","setIsBasketRemoval","setIsDiscount","setIsCoupon","actions"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { Guitar, GuitarData, GuitarTypes, SortType } from '../types/types';\nimport { NameSpace } from '../const';\nimport type { Comment } from './../types/types';\nimport { sortByParams } from '../utils';\nimport hashHistory from '../hash-history';\nimport {toast} from 'react-toastify';\nconst initialState: GuitarData = {\n  guitars: [],\n  guitar: null,\n  comments: null,\n  isDataLoaded: false,\n  isDataSending: false,\n  isSuccessModalOpened: false,\n  isCommentModalOpened: false,\n  isSorting: null,\n  isSortInc: null,\n  minPrice: null,\n  maxPrice: null,\n  selectedTypes: [],\n  selectedStrings: [],\n  filteredGuitarsLength: null,\n  filteredPriceMin: null,\n  filteredPriceMax: null,\n  boughtGuitars: [],\n  isDisconnect: true,\n  isSuccessBasketModal: false,\n  isBasketModalOpened: false,\n  isGuitar: null,\n  isBasketRemoval: false,\n  isDiscount: 0,\n  isCoupon: null,\n};\n\nexport const guitarData = createSlice({\n  name: NameSpace.data,\n  initialState,\n  reducers: {\n    setIsSuccessModalOpened: (state, action: { payload: boolean }) => {\n      state.isSuccessModalOpened = action.payload;\n    },\n    setIsCommentModalOpened: (state, action: { payload: boolean }) => {\n      state.isCommentModalOpened = action.payload;\n    },\n    setIsSorting: (state, action: { payload: SortType }) => {\n      state.isSorting = action.payload;\n      if (state.isSortInc === null) {\n        state.isSortInc = true;\n      }\n      const { guitars, isSortInc, isSorting } = state;\n      state.guitars = sortByParams({ guitars, isSortInc, isSorting });\n      window.localStorage.setItem('sortType',String(isSorting));\n      window.localStorage.setItem('sortDirection',String(isSortInc));\n      hashHistory.push({\n        search: `sortType=${state.isSorting}?sortDirection=${state.isSortInc}`,\n      });\n    },\n    setIsSortInc: (state, action: { payload: boolean }) => {\n      state.isSortInc = action.payload;\n      if (state.isSorting === null) {\n        state.isSorting = 'price';\n      }\n      const { guitars, isSortInc, isSorting } = state;\n      state.guitars = sortByParams({ guitars, isSortInc, isSorting });\n      window.localStorage.setItem('sortType',String(isSorting));\n      window.localStorage.setItem('sortDirection',String(isSortInc));\n      hashHistory.push({\n        search: `sortType=${isSorting}?sortDirection=${isSortInc}`,\n      });\n    },\n    loadGuitars: (state, action) => {\n      state.guitars = action.payload;\n      state.isDataLoaded = true;\n    },\n    loadGuitar: (state, action) => {\n      state.guitar = action.payload;\n    },\n    loadComments: (state, action: { payload: Comment[] }) => {\n      state.comments = action.payload.sort((a, b) => new Date(b.createAt).getTime() - new Date(a.createAt).getTime());\n      if (action.payload[0]) {\n        const first = action.payload[0];\n        if (action.payload.every((el) => Number(el.guitarId) === Number(first.guitarId))) {\n          const guitar = state.guitars.find((el) => Number(el.id) === Number(first.guitarId));\n          if (guitar) {\n            guitar.commentsCount = action.payload.length;\n          }\n        }\n      }\n    },\n    sendComment: (state, action) => {\n      state.isDataSending = action.payload;\n    },\n    setMinPrice: (state, action:{ payload: string | null}) => {\n      if (action.payload === null || action.payload==='' || action.payload===undefined ) {\n        window.localStorage.removeItem('minPrice');\n      }\n      state.minPrice = action.payload;\n    },\n    setMaxPrice: (state, action:{ payload: string | null}) => {\n      if (action.payload === null || action.payload==='' || action.payload===undefined) {\n        window.localStorage.removeItem('maxPrice');\n      }\n      state.maxPrice = action.payload;\n    },\n    setSelectedTypes: (state, action: { payload: GuitarTypes | null }) => {\n      const { selectedTypes } = state;\n      const { payload } = action;\n      if (!payload) {\n        state.selectedTypes = [];\n      } else {\n        if (selectedTypes.includes(payload)) {\n          state.selectedTypes = selectedTypes.filter((el) => el !== payload);\n        }\n        else {\n          selectedTypes.push(payload);\n        }\n        let fUkulele: number[] = [];\n        let fElectric: number[] = [];\n        let fAcoustc: number[] = [];\n        if (state.selectedTypes.length > 0) {\n          if (state.selectedTypes.includes('electric')) {\n            fElectric = state.selectedStrings.filter((el) => el < 12);\n          }\n          if (state.selectedTypes.includes('ukulele')) {\n            fUkulele = state.selectedStrings.filter((el) => el < 6);\n          }\n          if (state.selectedTypes.includes('acoustic')) {\n            fAcoustc = state.selectedStrings.filter((el) => el > 4);\n          }\n          state.selectedStrings = Array.from(new Set([...fElectric, ...fUkulele, ...fAcoustc]));\n        }\n        if (state.selectedTypes.length === 0) {\n          window.localStorage.removeItem('types');\n        }\n        if (state.selectedStrings.length === 0) {\n          window.localStorage.removeItem('strings');\n        }\n      }\n    },\n    setTypesGroup: (state, action: { payload: GuitarTypes[] }) => {\n      state.selectedTypes = action.payload;\n    },\n    setStringsGroup: (state, action: { payload: number[] }) => {\n      state.selectedStrings = action.payload;\n    },\n    setSelectedStrings: (state, action: { payload: number | null }) => {\n      const { selectedStrings } = state;\n      const { payload } = action;\n      if (!payload) {\n        state.selectedStrings = [];\n      } else {\n        if (selectedStrings.includes(payload)) {\n          state.selectedStrings = selectedStrings.filter((el) => el !== payload);\n        }\n        else {\n          selectedStrings.push(payload);\n        }\n      }\n      if (  state.selectedStrings.length === 0) {\n        window.localStorage.removeItem('strings');\n      }\n    },\n    setFilteredGuitarsLength: (state, action) => {\n      state.filteredGuitarsLength = action.payload;\n    },\n    setFilteredPriceMin: (state, action) => {\n      state.filteredPriceMin = action.payload;\n    },\n    setFilteredPriceMax: (state, action) => {\n      state.filteredPriceMax = action.payload;\n    },\n    buyGuitar: (state, action: {payload : Guitar}) => {\n      const { boughtGuitars } = state;\n      const { payload } = action;\n      const boughtGuitar = state.boughtGuitars.find((el) => el.id === payload.id);\n      if (boughtGuitar) {\n        boughtGuitar.quantity = (boughtGuitar.quantity || 0) + 1;\n      }\n      else {\n        const newGuitar = {...payload};\n        newGuitar.quantity = 1;\n        boughtGuitars.push(newGuitar);\n      }\n    },\n    deleteGuitar: (state, action) => {\n      const { boughtGuitars } = state;\n      const { payload } = action;\n      state.boughtGuitars = boughtGuitars.filter((el) => el.id !== payload);\n    },\n    setQuantity: (state, action: {payload : {id:number, quantity: 'inc' | 'decr'}}) => {\n      const {id, quantity} = action.payload;\n      const boughtGuitar = state.boughtGuitars.find((el) => el.id === id);\n      if (boughtGuitar) {\n        boughtGuitar.quantity = quantity === 'inc' ?  (boughtGuitar.quantity || 1) + 1 : (boughtGuitar.quantity || 1) - 1;\n        if (boughtGuitar.quantity < 1) {\n          state.isBasketRemoval = true;\n          boughtGuitar.quantity = (boughtGuitar.quantity || 0) + 1;\n        }\n      }\n    },\n    setQuantityText: (state, action: {payload : {id:number, quantity: number}}) => {\n      const {id, quantity} = action.payload;\n      const boughtGuitar = state.boughtGuitars.find((el) => el.id === id);\n      if (boughtGuitar) {\n        boughtGuitar.quantity = quantity;\n      }\n    },\n    setIsDisconnect: (state, action ) => {\n      state.isDisconnect = action.payload;\n      if (!action.payload) {\n        toast.error('Internet disconnected');\n        state.isDisconnect = true;\n      }\n    },\n    setIsSuccessBasket: (state, action) => {\n      state.isSuccessBasketModal = action.payload;\n    },\n    setIsBasket: (state, action) => {\n      state.isBasketModalOpened = action.payload;\n    },\n    setIsGuitar: (state, action) => {\n      state.isGuitar = action.payload;\n    },\n    setIsBasketRemoval: (state, action) => {\n      state.isBasketRemoval = action.payload;\n    },\n    setIsDiscount: (state, action) => {\n      state.isDiscount = action.payload;\n    },\n    setIsCoupon: (state, action) => {\n      state.isCoupon = action.payload;\n    },\n  },\n});\n\nexport const {\n  loadGuitars,\n  loadGuitar,\n  loadComments,\n  sendComment,\n  setIsSuccessModalOpened,\n  setIsCommentModalOpened,\n  setIsSorting,\n  setIsSortInc,\n  setMinPrice,\n  setMaxPrice,\n  setSelectedTypes,\n  setSelectedStrings,\n  setFilteredGuitarsLength,\n  setFilteredPriceMin,\n  setFilteredPriceMax,\n  setStringsGroup,\n  setTypesGroup,\n  buyGuitar,\n  setQuantity,\n  deleteGuitar,\n  setIsDisconnect,\n  setIsBasket,\n  setIsSuccessBasket,\n  setIsGuitar,\n  setIsBasketRemoval,\n  setIsDiscount,\n  setQuantityText,\n  setIsCoupon,\n} = guitarData.actions;\n"]},"metadata":{},"sourceType":"module"}