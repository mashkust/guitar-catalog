{"ast":null,"code":"import _toConsumableArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import{useState}from'react';import{generatePath,Link}from'react-router-dom';import{AppRoute,STARS_MAX}from'../const';import{useAppDispatch}from'../hooks/hooks';import{fetchCommentsAction}from'../store/api-actions';import{pasrePrice,stopScroll}from'../utils';import BasketCard from'./basket-card';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GuitarCard(_ref){var guitar=_ref.guitar;var name=guitar.name,price=guitar.price,previewImg=guitar.previewImg,id=guitar.id,rating=guitar.rating;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),mount=_useState2[0],setMount=_useState2[1];var STARS=Math.ceil(rating);var NULL_STARS=STARS_MAX-STARS;var dispatch=useAppDispatch();if(!mount){if(id){dispatch(fetchCommentsAction(id));}}useEffect(function(){return setMount(true);},[]);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isBookingModalOpened=_useState4[0],setIsBookingModalOpened=_useState4[1];var onBookingBtnClick=function onBookingBtnClick(){setIsBookingModalOpened(true);};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"img/content/\".concat(previewImg.length&&previewImg.slice(0).substring(4)),srcSet:\"img/content/\".concat(previewImg.length&&previewImg.slice(0).substring(4,previewImg.length-4),\"@2x.jpg 2x\"),width:\"75\",height:\"190\",alt:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-card__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rate product-card__rate\",children:[_toConsumableArray(Array(STARS)).map(function(){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"svg\",{width:\"12\",height:\"11\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"use\",{href:\"#icon-full-star\"})})},Math.random());}),_toConsumableArray(Array(NULL_STARS)).map(function(){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"svg\",{width:\"12\",height:\"11\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"use\",{href:\"#icon-star\"})})},Math.random());}),/*#__PURE__*/_jsxs(\"p\",{className:\"visually-hidden\",children:[\"\\u0420\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433 \",rating]}),/*#__PURE__*/_jsxs(\"p\",{className:\"rate__count\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"\\u0412\\u0441\\u0435\\u0433\\u043E \\u043E\\u0446\\u0435\\u043D\\u043E\\u043A:\"}),guitar.commentsCount||'-']})]}),/*#__PURE__*/_jsx(\"p\",{className:\"product-card__title\",children:name}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-card__price\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"\\u0426\\u0435\\u043D\\u0430:\"}),pasrePrice(price),\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-card__buttons\",children:[/*#__PURE__*/_jsx(Link,{to:generatePath(AppRoute.Details,{id:String(id)}),className:\"button button--mini\",children:\"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button button--red button--mini button--add-to-cart\",onClick:function onClick(){onBookingBtnClick();stopScroll();},children:\"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C\"}),isBookingModalOpened&&/*#__PURE__*/_jsx(BasketCard,{guitar:guitar,setIsBookingModalOpened:setIsBookingModalOpened})]})]});}export default GuitarCard;","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/components/guitar-card.tsx"],"names":["React","useEffect","useState","generatePath","Link","AppRoute","STARS_MAX","useAppDispatch","fetchCommentsAction","pasrePrice","stopScroll","BasketCard","GuitarCard","guitar","name","price","previewImg","id","rating","mount","setMount","STARS","Math","ceil","NULL_STARS","dispatch","isBookingModalOpened","setIsBookingModalOpened","onBookingBtnClick","length","slice","substring","Array","map","random","commentsCount","Details","String"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport { generatePath, Link } from 'react-router-dom';\nimport { AppRoute, STARS_MAX } from '../const';\nimport { useAppDispatch} from '../hooks/hooks';\nimport { fetchCommentsAction } from '../store/api-actions';\nimport type { Guitar} from '../types/types';\nimport { pasrePrice, stopScroll } from '../utils';\nimport BasketCard from './basket-card';\n\ntype GuitarCardProps = {\n  guitar: Guitar;\n}\n\nfunction GuitarCard({ guitar }: GuitarCardProps): JSX.Element {\n  const { name, price, previewImg, id, rating } = guitar;\n\n  const [ mount, setMount ] = useState(false);\n\n  const STARS = Math.ceil(rating);\n  const NULL_STARS = STARS_MAX - STARS;\n  const dispatch = useAppDispatch();\n\n  if (!mount) {\n    if (id) {\n      dispatch(fetchCommentsAction(id));\n    }\n  }\n\n  useEffect(() =>  setMount(true), []);\n\n  const [isBookingModalOpened, setIsBookingModalOpened] = useState<boolean>(false);\n  const onBookingBtnClick = () => {\n    setIsBookingModalOpened(true);\n  };\n\n  return (\n    <div className=\"product-card\"><img src={`img/content/${previewImg.length && previewImg.slice(0).substring(4)}`} srcSet={`img/content/${previewImg.length && previewImg.slice(0).substring(4, previewImg.length - 4)}@2x.jpg 2x`} width=\"75\" height=\"190\" alt={name} />\n      <div className=\"product-card__info\">\n        <div className=\"rate product-card__rate\">\n          {\n            [...Array(STARS)].map(() => (\n              <React.Fragment key={Math.random()}>\n                <svg width=\"12\" height=\"11\" aria-hidden=\"true\">\n                  <use href=\"#icon-full-star\"></use>\n                </svg>\n              </React.Fragment>\n            ))\n          }\n          {\n            [...Array(NULL_STARS)].map(() => (\n              <React.Fragment key={Math.random()}>\n                <svg width=\"12\" height=\"11\" aria-hidden=\"true\">\n                  <use href=\"#icon-star\"></use>\n                </svg>\n              </React.Fragment>\n            ))\n          }\n          <p className=\"visually-hidden\">Рейтинг {rating}</p>\n          <p className=\"rate__count\"><span className=\"visually-hidden\">Всего оценок:</span>{guitar.commentsCount || '-'}</p>\n        </div>\n        <p className=\"product-card__title\">{name}</p>\n        <p className=\"product-card__price\"><span className=\"visually-hidden\">Цена:</span>{pasrePrice(price)} ₽\n        </p>\n      </div>\n      <div className=\"product-card__buttons\"><Link to={generatePath(AppRoute.Details, { id: String(id) })} className=\"button button--mini\" >Подробнее</Link>\n        <button className=\"button button--red button--mini button--add-to-cart\"\n          onClick={() => {\n            onBookingBtnClick();\n            stopScroll();\n          }}\n        >Купить\n        </button>\n        {isBookingModalOpened && <BasketCard guitar={guitar} setIsBookingModalOpened={setIsBookingModalOpened} />}\n      </div>\n    </div>\n  );\n}\n\nexport default GuitarCard;\n"]},"metadata":{},"sourceType":"module"}