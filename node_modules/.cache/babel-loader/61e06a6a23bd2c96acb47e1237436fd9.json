{"ast":null,"code":"import _slicedToArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Route,Routes}from'react-router-dom';import{AppRoute,LIST_OF_GUITAR}from'../../const';import{useAppDispatch,useAppSelector}from'../../hooks/hooks';import GuitarPage from'../guitar-page';import MainPage from'../main-page';import NotFoundPage from'../notfound-page';import LoadingScreen from'../loading-screen';import{useEffect,useState}from'react';import{setFilteredGuitarsLength,setFilteredPriceMax,setFilteredPriceMin}from'../../store/guitar-data';import hashHistory from'../../hash-history';import BasketPage from'../basket-page';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var guitars=useAppSelector(function(_ref){var DATA=_ref.DATA;return DATA.guitars;});var isDataLoaded=useAppSelector(function(_ref2){var DATA=_ref2.DATA;return DATA.isDataLoaded;});var maxPrice=useAppSelector(function(_ref3){var DATA=_ref3.DATA;return DATA.maxPrice;});var minPrice=useAppSelector(function(_ref4){var DATA=_ref4.DATA;return DATA.minPrice;});var selectedTypes=useAppSelector(function(_ref5){var DATA=_ref5.DATA;return DATA.selectedTypes;});var selectedStrings=useAppSelector(function(_ref6){var DATA=_ref6.DATA;return DATA.selectedStrings;});var dispatch=useAppDispatch();var _useState=useState(guitars),_useState2=_slicedToArray(_useState,2),filteredGuitars=_useState2[0],setFilteredGuitars=_useState2[1];useEffect(function(){setFilteredGuitars(guitars.slice(0).filter(function(el){return(maxPrice===null||el.price<=Number(maxPrice))&&(minPrice===null||el.price>=Number(minPrice))&&(selectedStrings.length===0?true:selectedStrings.includes(el.stringCount))&&(selectedTypes.length===0?true:selectedTypes.includes(el.type));}));var filterSearch='?filters=false';if(selectedStrings.length>0||selectedTypes.length>0||minPrice!==null||maxPrice!==null){filterSearch='?filters=true';}if(selectedStrings.length>0){var param1=selectedStrings.map(function(el,i,arr){return el+(i===arr.length-1?'':'&');}).join('');filterSearch+=\"?strings=\".concat(param1);window.localStorage.setItem('strings',String(param1));}if(selectedTypes.length>0){var param2=selectedTypes.map(function(el,i,arr){return el+(i===arr.length-1?'':'&');}).join('');filterSearch+=\"?types=\".concat(param2);window.localStorage.setItem('types',String(param2));}if(minPrice!==null){var param3=minPrice;filterSearch+=\"?minPrice=\".concat(param3);window.localStorage.setItem('minPrice',String(param3));}if(maxPrice!==null){var param4=maxPrice;filterSearch+=\"?maxPrice=\".concat(param4);window.localStorage.setItem('maxPrice',String(param4));}var startIndex=hashHistory.location.search.indexOf('?filters');hashHistory.push({search:(startIndex!==-1?hashHistory.location.search.slice(0,startIndex):hashHistory.location.search)+filterSearch});},[maxPrice,minPrice,selectedTypes,selectedStrings,guitars]);useEffect(function(){dispatch(setFilteredGuitarsLength(filteredGuitars.length));dispatch(setFilteredPriceMax(filteredGuitars.slice().map(function(el){return el.price;}).sort(function(a,b){return b-a;})[0]&&filteredGuitars.slice().map(function(el){return el.price;}).sort(function(a,b){return b-a;})[0]));dispatch(setFilteredPriceMin(filteredGuitars.slice().map(function(el){return el.price;}).sort(function(a,b){return b-a;})[0]&&filteredGuitars.slice().map(function(el){return el.price;}).sort(function(a,b){return b-a;})[filteredGuitars.length-1]));},[filteredGuitars]);if(!isDataLoaded){return/*#__PURE__*/_jsx(LoadingScreen,{});}return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:AppRoute.Page1,element:/*#__PURE__*/_jsx(MainPage,{guitars:filteredGuitars.slice(LIST_OF_GUITAR[0].rangeFrom,LIST_OF_GUITAR[0].rangeTo)})}),/*#__PURE__*/_jsx(Route,{path:AppRoute.Page2,element:/*#__PURE__*/_jsx(MainPage,{guitars:filteredGuitars.slice(LIST_OF_GUITAR[1].rangeFrom,LIST_OF_GUITAR[1].rangeTo)})}),/*#__PURE__*/_jsx(Route,{path:AppRoute.Page3,element:/*#__PURE__*/_jsx(MainPage,{guitars:filteredGuitars.slice(LIST_OF_GUITAR[2].rangeFrom,LIST_OF_GUITAR[2].rangeTo)})}),/*#__PURE__*/_jsx(Route,{path:AppRoute.Details,element:/*#__PURE__*/_jsx(GuitarPage,{tab:true})}),/*#__PURE__*/_jsx(Route,{path:AppRoute.Description,element:/*#__PURE__*/_jsx(GuitarPage,{tab:false})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(NotFoundPage,{})}),/*#__PURE__*/_jsx(Route,{path:AppRoute.Basket,element:/*#__PURE__*/_jsx(BasketPage,{})})]});}export default App;","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/components/app/app.tsx"],"names":["Route","Routes","AppRoute","LIST_OF_GUITAR","useAppDispatch","useAppSelector","GuitarPage","MainPage","NotFoundPage","LoadingScreen","useEffect","useState","setFilteredGuitarsLength","setFilteredPriceMax","setFilteredPriceMin","hashHistory","BasketPage","App","guitars","DATA","isDataLoaded","maxPrice","minPrice","selectedTypes","selectedStrings","dispatch","filteredGuitars","setFilteredGuitars","slice","filter","el","price","Number","length","includes","stringCount","type","filterSearch","param1","map","i","arr","join","window","localStorage","setItem","String","param2","param3","param4","startIndex","location","search","indexOf","push","sort","a","b","Page1","rangeFrom","rangeTo","Page2","Page3","Details","Description","Basket"],"mappings":"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","sourcesContent":["import { Route, Routes } from 'react-router-dom';\nimport { AppRoute, LIST_OF_GUITAR } from '../../const';\nimport { useAppDispatch, useAppSelector } from '../../hooks/hooks';\nimport GuitarPage from '../guitar-page';\nimport MainPage from '../main-page';\nimport NotFoundPage from '../notfound-page';\nimport LoadingScreen from '../loading-screen';\nimport { useEffect, useState } from 'react';\nimport { setFilteredGuitarsLength, setFilteredPriceMax, setFilteredPriceMin } from '../../store/guitar-data';\nimport hashHistory from '../../hash-history';\nimport BasketPage from '../basket-page';\n\nfunction App(): JSX.Element {\n  const guitars = useAppSelector(({ DATA }) => DATA.guitars);\n  const isDataLoaded = useAppSelector(({ DATA }) => DATA.isDataLoaded);\n  const maxPrice = useAppSelector(({ DATA }) => DATA.maxPrice);\n  const minPrice = useAppSelector(({ DATA }) => DATA.minPrice);\n  const selectedTypes = useAppSelector(({ DATA }) => DATA.selectedTypes);\n  const selectedStrings = useAppSelector(({ DATA }) => DATA.selectedStrings);\n\n  const dispatch = useAppDispatch();\n  const [filteredGuitars, setFilteredGuitars] = useState(guitars);\n\n  useEffect(() => {\n    setFilteredGuitars(guitars.slice(0).filter((el) => (maxPrice === null || el.price <= Number(maxPrice))\n      && (minPrice === null || el.price >= Number(minPrice))\n      && (selectedStrings.length === 0 ? true : selectedStrings.includes(el.stringCount))\n      && (selectedTypes.length === 0 ? true : selectedTypes.includes(el.type))));\n\n    let filterSearch = '?filters=false';\n\n    if ( selectedStrings.length > 0 || selectedTypes.length > 0 ||  minPrice !== null  || maxPrice !== null ) {\n      filterSearch = '?filters=true';\n    }\n\n    if (selectedStrings.length > 0) {\n      const param1 = selectedStrings.map((el, i, arr) => el + (i === arr.length - 1 ? '' : '&')).join('');\n      filterSearch += `?strings=${param1}`;\n      window.localStorage.setItem('strings',String(param1));\n    }\n    if ( selectedTypes.length > 0 ) {\n      const param2 = selectedTypes.map((el, i, arr) => el + (i === arr.length - 1 ? '' : '&')).join('');\n      filterSearch += `?types=${param2}`;\n      window.localStorage.setItem('types',String(param2));\n    }\n\n    if ( minPrice !== null ) {\n      const param3 = minPrice;\n      filterSearch += `?minPrice=${param3}`;\n      window.localStorage.setItem('minPrice',String(param3));\n    }\n\n    if (maxPrice !== null) {\n      const param4 = maxPrice;\n      filterSearch += `?maxPrice=${param4}`;\n      window.localStorage.setItem('maxPrice',String(param4));\n    }\n\n    const startIndex = hashHistory.location.search.indexOf('?filters');\n    hashHistory.push({\n      search: (startIndex !== -1 ?  hashHistory.location.search.slice(0, startIndex) : hashHistory.location.search) + filterSearch,\n    });\n\n\n  }, [maxPrice, minPrice, selectedTypes, selectedStrings, guitars]);\n\n  useEffect(() => {\n    dispatch(setFilteredGuitarsLength(filteredGuitars.length));\n    dispatch(setFilteredPriceMax(filteredGuitars.slice().map((el)=>el.price).sort((a,b) => b - a)[0] && filteredGuitars.slice().map((el)=>el.price).sort((a,b) => b - a)[0]));\n    dispatch(setFilteredPriceMin(filteredGuitars.slice().map((el)=>el.price).sort((a,b) => b - a)[0] && filteredGuitars.slice().map((el)=>el.price).sort((a,b) => b - a)[filteredGuitars.length-1] ));\n  }, [filteredGuitars]);\n\n  if (!isDataLoaded) {\n    return (\n      <LoadingScreen />\n    );\n  }\n  return (\n    <Routes>\n      <Route\n        path={AppRoute.Page1}\n        element={<MainPage guitars={filteredGuitars.slice(LIST_OF_GUITAR[0].rangeFrom, LIST_OF_GUITAR[0].rangeTo)} />}\n      />\n      <Route\n        path={AppRoute.Page2}\n        element={<MainPage guitars={filteredGuitars.slice(LIST_OF_GUITAR[1].rangeFrom, LIST_OF_GUITAR[1].rangeTo)} />}\n      />\n      <Route\n        path={AppRoute.Page3}\n        element={<MainPage guitars={filteredGuitars.slice(LIST_OF_GUITAR[2].rangeFrom, LIST_OF_GUITAR[2].rangeTo)} />}\n      />\n      <Route\n        path={AppRoute.Details}\n        element={<GuitarPage tab />}\n      />\n      <Route\n        path={AppRoute.Description}\n        element={<GuitarPage tab={false} />}\n      />\n      <Route\n        path=\"/*\"\n        element={<NotFoundPage />}\n      />\n      <Route\n        path={AppRoute.Basket}\n        element={<BasketPage />}\n      />\n    </Routes>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}