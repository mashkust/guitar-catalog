{"ast":null,"code":"import _toConsumableArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{createSlice}from'@reduxjs/toolkit';import{NameSpace}from'../const';import{sortByParams}from'../utils';var initialState={guitars:[],guitar:null,comments:null,isDataLoaded:false,isDataSending:false,isSuccessModalOpened:false,isCommentModalOpened:false,isSorting:null,isSortInc:null,minPrice:null,maxPrice:null,selectedTypes:[],selectedStrings:[],filteredGuitarsLength:null};export var guitarData=createSlice({name:NameSpace.data,initialState:initialState,reducers:{setIsSuccessModalOpened:function setIsSuccessModalOpened(state,action){state.isSuccessModalOpened=action.payload;},setIsCommentModalOpened:function setIsCommentModalOpened(state,action){state.isCommentModalOpened=action.payload;},// setSortParams: (state, action: { payload: { isSorting : SortType, isSortInc: boolean } }) => {\n//   const { isSortInc, isSorting } = action.payload;\n//   hashHistory.push({\n//     search: `sortType=${isSorting}&sortDirection=${isSortInc}`,\n//   });\n// },\nsetIsSorting:function setIsSorting(state,action){state.isSorting=action.payload;if(state.isSortInc===null){state.isSortInc=true;}var guitars=state.guitars,isSortInc=state.isSortInc,isSorting=state.isSorting;state.guitars=sortByParams({guitars:guitars,isSortInc:isSortInc,isSorting:isSorting});// hashHistory.push({\n//   search: `sortType=${isSorting}&sortDirection=${isSortInc}`,\n// });\n},setIsSortInc:function setIsSortInc(state,action){state.isSortInc=action.payload;if(state.isSorting===null){state.isSorting='price';}var guitars=state.guitars,isSortInc=state.isSortInc,isSorting=state.isSorting;state.guitars=sortByParams({guitars:guitars,isSortInc:isSortInc,isSorting:isSorting});// hashHistory.push({\n//   search: `sortType=${isSorting}&sortDirection=${isSortInc}`,\n// });\n},loadGuitars:function loadGuitars(state,action){state.guitars=action.payload;state.isDataLoaded=true;},loadGuitar:function loadGuitar(state,action){state.guitar=action.payload;},loadComments:function loadComments(state,action){state.comments=action.payload.sort(function(a,b){return new Date(b.createAt).getTime()-new Date(a.createAt).getTime();});if(action.payload[0]){var first=action.payload[0];if(action.payload.every(function(el){return Number(el.guitarId)===Number(first.guitarId);})){var guitar=state.guitars.find(function(el){return Number(el.id)===Number(first.guitarId);});if(guitar){guitar.commentsCount=action.payload.length;}}}},sendComment:function sendComment(state,action){state.isDataSending=action.payload;},setMinPrice:function setMinPrice(state,action){state.minPrice=action.payload;},setMaxPrice:function setMaxPrice(state,action){state.maxPrice=action.payload;},setSelectedTypes:function setSelectedTypes(state,action){var selectedTypes=state.selectedTypes;var payload=action.payload;if(selectedTypes.includes(payload)){state.selectedTypes=selectedTypes.filter(function(el){return el!==payload;});}else{selectedTypes.push(payload);}var fUkulele=[];var fElectric=[];var fAcoustc=[];if(state.selectedTypes.length>0){if(state.selectedTypes.includes('electric')){fElectric=state.selectedStrings.filter(function(el){return el<12;});}if(state.selectedTypes.includes('ukulele')){fUkulele=state.selectedStrings.filter(function(el){return el<6;});}if(state.selectedTypes.includes('acoustic')){fAcoustc=state.selectedStrings.filter(function(el){return el>4;});}state.selectedStrings=Array.from(new Set([].concat(_toConsumableArray(fElectric),_toConsumableArray(fUkulele),_toConsumableArray(fAcoustc))));}},setSelectedStrings:function setSelectedStrings(state,action){var selectedStrings=state.selectedStrings;var payload=action.payload;if(selectedStrings.includes(payload)){state.selectedStrings=selectedStrings.filter(function(el){return el!==payload;});}else{selectedStrings.push(payload);}},setFilteredGuitarsLength:function setFilteredGuitarsLength(state,action){state.filteredGuitarsLength=action.payload;}}});var _guitarData$actions=guitarData.actions,loadGuitars=_guitarData$actions.loadGuitars,loadGuitar=_guitarData$actions.loadGuitar,loadComments=_guitarData$actions.loadComments,sendComment=_guitarData$actions.sendComment,setIsSuccessModalOpened=_guitarData$actions.setIsSuccessModalOpened,setIsCommentModalOpened=_guitarData$actions.setIsCommentModalOpened,setIsSorting=_guitarData$actions.setIsSorting,setIsSortInc=_guitarData$actions.setIsSortInc,setMinPrice=_guitarData$actions.setMinPrice,setMaxPrice=_guitarData$actions.setMaxPrice,setSelectedTypes=_guitarData$actions.setSelectedTypes,setSelectedStrings=_guitarData$actions.setSelectedStrings,setFilteredGuitarsLength=_guitarData$actions.setFilteredGuitarsLength;export{loadGuitars,loadGuitar,loadComments,sendComment,setIsSuccessModalOpened,setIsCommentModalOpened,setIsSorting,setIsSortInc,setMinPrice,setMaxPrice,setSelectedTypes,setSelectedStrings,setFilteredGuitarsLength};","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/store/guitar-data.ts"],"names":["createSlice","NameSpace","sortByParams","initialState","guitars","guitar","comments","isDataLoaded","isDataSending","isSuccessModalOpened","isCommentModalOpened","isSorting","isSortInc","minPrice","maxPrice","selectedTypes","selectedStrings","filteredGuitarsLength","guitarData","name","data","reducers","setIsSuccessModalOpened","state","action","payload","setIsCommentModalOpened","setIsSorting","setIsSortInc","loadGuitars","loadGuitar","loadComments","sort","a","b","Date","createAt","getTime","first","every","el","Number","guitarId","find","id","commentsCount","length","sendComment","setMinPrice","setMaxPrice","setSelectedTypes","includes","filter","push","fUkulele","fElectric","fAcoustc","Array","from","Set","setSelectedStrings","setFilteredGuitarsLength","actions"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { GuitarData, GuitarTypes, SortType } from '../types/types';\nimport { NameSpace } from '../const';\nimport type { Comment } from './../types/types';\nimport { sortByParams } from '../utils';\nconst initialState: GuitarData = {\n  guitars: [],\n  guitar: null,\n  comments: null,\n  isDataLoaded: false,\n  isDataSending: false,\n  isSuccessModalOpened: false,\n  isCommentModalOpened: false,\n  isSorting: null,\n  isSortInc: null,\n  minPrice: null,\n  maxPrice: null,\n  selectedTypes: [],\n  selectedStrings: [],\n  filteredGuitarsLength: null,\n};\n\nexport const guitarData = createSlice({\n  name: NameSpace.data,\n  initialState,\n  reducers: {\n    setIsSuccessModalOpened: (state, action: { payload: boolean }) => {\n      state.isSuccessModalOpened = action.payload;\n    },\n    setIsCommentModalOpened: (state, action: { payload: boolean }) => {\n      state.isCommentModalOpened = action.payload;\n    },\n    // setSortParams: (state, action: { payload: { isSorting : SortType, isSortInc: boolean } }) => {\n    //   const { isSortInc, isSorting } = action.payload;\n    //   hashHistory.push({\n    //     search: `sortType=${isSorting}&sortDirection=${isSortInc}`,\n    //   });\n    // },\n    setIsSorting: (state, action: { payload: SortType }) => {\n      state.isSorting = action.payload;\n      if (state.isSortInc === null) {\n        state.isSortInc = true;\n      }\n      const { guitars, isSortInc, isSorting } = state;\n      state.guitars = sortByParams({ guitars, isSortInc, isSorting });\n      // hashHistory.push({\n      //   search: `sortType=${isSorting}&sortDirection=${isSortInc}`,\n      // });\n    },\n    setIsSortInc: (state, action: { payload: boolean }) => {\n      state.isSortInc = action.payload;\n      if (state.isSorting === null) {\n        state.isSorting = 'price';\n      }\n      const { guitars, isSortInc, isSorting } = state;\n      state.guitars = sortByParams({ guitars, isSortInc, isSorting });\n      // hashHistory.push({\n      //   search: `sortType=${isSorting}&sortDirection=${isSortInc}`,\n      // });\n    },\n    loadGuitars: (state, action) => {\n      state.guitars = action.payload;\n      state.isDataLoaded = true;\n    },\n    loadGuitar: (state, action) => {\n      state.guitar = action.payload;\n    },\n    loadComments: (state, action: { payload: Comment[] }) => {\n      state.comments = action.payload.sort((a, b) => new Date(b.createAt).getTime() - new Date(a.createAt).getTime());\n      if (action.payload[0]) {\n        const first = action.payload[0];\n        if (action.payload.every((el) => Number(el.guitarId) === Number(first.guitarId))) {\n          const guitar = state.guitars.find((el) => Number(el.id) === Number(first.guitarId));\n          if (guitar) {\n            guitar.commentsCount = action.payload.length;\n          }\n        }\n      }\n    },\n    sendComment: (state, action) => {\n      state.isDataSending = action.payload;\n    },\n    setMinPrice: (state, action) => {\n      state.minPrice = action.payload;\n    },\n    setMaxPrice: (state, action) => {\n      state.maxPrice = action.payload;\n    },\n    setSelectedTypes: (state, action: { payload: GuitarTypes }) => {\n      const { selectedTypes } = state;\n      const { payload } = action;\n      if (selectedTypes.includes(payload)) {\n        state.selectedTypes = selectedTypes.filter((el) => el !== payload);\n      }\n      else {\n        selectedTypes.push(payload);\n      }\n      let fUkulele: number[] = [];\n      let fElectric: number[] = [];\n      let fAcoustc: number[] = [];\n      if (state.selectedTypes.length > 0) {\n        if (state.selectedTypes.includes('electric')) {\n          fElectric = state.selectedStrings.filter((el) => el < 12);\n        }\n        if (state.selectedTypes.includes('ukulele')) {\n          fUkulele = state.selectedStrings.filter((el) => el < 6);\n        }\n        if (state.selectedTypes.includes('acoustic')) {\n          fAcoustc = state.selectedStrings.filter((el) => el > 4);\n        }\n        state.selectedStrings = Array.from(new Set([...fElectric, ...fUkulele, ...fAcoustc]));\n      }\n    },\n    setSelectedStrings: (state, action: { payload: number }) => {\n      const { selectedStrings } = state;\n      const { payload } = action;\n      if (selectedStrings.includes(payload)) {\n        state.selectedStrings = selectedStrings.filter((el) => el !== payload);\n      }\n      else {\n        selectedStrings.push(payload);\n      }\n    },\n    setFilteredGuitarsLength: (state, action) => {\n      state.filteredGuitarsLength = action.payload;\n    },\n  },\n});\n\nexport const {\n  loadGuitars,\n  loadGuitar,\n  loadComments,\n  sendComment,\n  setIsSuccessModalOpened,\n  setIsCommentModalOpened,\n  setIsSorting,\n  setIsSortInc,\n  setMinPrice,\n  setMaxPrice,\n  setSelectedTypes,\n  setSelectedStrings,\n  setFilteredGuitarsLength,\n} = guitarData.actions;\n"]},"metadata":{},"sourceType":"module"}