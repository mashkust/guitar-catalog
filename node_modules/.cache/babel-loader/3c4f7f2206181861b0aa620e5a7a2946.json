{"ast":null,"code":"import _slicedToArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{RATING_VALUES}from'../const';import{useAppDispatch,useAppSelector}from'../hooks/hooks';import{sendCommentAction}from'../store/api-actions';import{sendComment,setIsCommentModalOpened,setIsDisconnect,setIsSuccessModalOpened}from'../store/guitar-data';import Pentoville from'pentonville';import{startScroll}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddComments(_ref){var guitar=_ref.guitar;var name=guitar.name,id=guitar.id;var dispatch=useAppDispatch();var isReviewSending=useAppSelector(function(_ref2){var DATA=_ref2.DATA;return DATA.isDataSending;});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),adv=_useState6[0],setAdv=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),disadv=_useState8[0],setDisadv=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),rating=_useState10[0],setRating=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isValidationText=_useState12[0],setIsValidationText=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isValidationName=_useState14[0],setIsValidationName=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isValidationRating=_useState16[0],setIsValidationRating=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isValidationAdv=_useState18[0],setIsValidationAdv=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isValidationDisadv=_useState20[0],setIsValidationDisadv=_useState20[1];var getValidation=function getValidation(val){setIsValidationText(val);setIsValidationName(val);setIsValidationRating(val);setIsValidationAdv(val);setIsValidationDisadv(val);};var ratingChangeHandler=function ratingChangeHandler(userRating){setRating(userRating);};var onSuccessBtnClick=function onSuccessBtnClick(){dispatch(setIsSuccessModalOpened(true));};return/*#__PURE__*/_jsx(Pentoville,{children:/*#__PURE__*/_jsx(\"div\",{className:\"modal is-active modal--review modal-for-ui-kit\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal__overlay\",onClick:function onClick(){dispatch(setIsCommentModalOpened(false));startScroll();}}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal__content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"modal__header modal__header--review title title--medium\",children:\"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"modal__product-name title title--medium-20 title--uppercase\",children:name}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-review\",onSubmit:function onSubmit(evt){evt.preventDefault();dispatch(setIsDisconnect(navigator.onLine));dispatch(sendComment(true));dispatch(sendCommentAction({comment:text,guitarId:id,rating:rating,userName:userName,advantage:adv,disadvantage:disadv}));if(navigator.onLine){dispatch(setIsCommentModalOpened(false));onSuccessBtnClick();}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-review__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-review__name-wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-review__label form-review__label--required\",htmlFor:\"user-name\",children:\"\\u0412\\u0430\\u0448\\u0435 \\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-review__input form-review__input--name\",id:\"user-name\",type:\"text\",autoComplete:\"off\",value:userName,disabled:isReviewSending,onChange:function onChange(evt){setUserName(evt.currentTarget.value);setIsValidationName(false);},required:true,autoFocus:true,tabIndex:1}),/*#__PURE__*/_jsxs(\"p\",{className:isValidationName&&userName.length===0?'form-review__warning':'form-review__war',children:[\" \",isValidationName&&userName.length===0?'Заполните поле':'']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"form-review__label form-review__label--required\",children:\"\\u0412\\u0430\\u0448\\u0430 \\u041E\\u0446\\u0435\\u043D\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rate rate--reverse\",children:[RATING_VALUES.map(function(el){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{className:\"visually-hidden\",id:\"star-\".concat(el.value),type:\"radio\",name:\"rate\",value:el.value,checked:rating===el.value,onChange:function onChange(evt){setIsValidationRating(false);ratingChangeHandler(Number(evt.target.value));},disabled:isReviewSending,required:true,tabIndex:2},el.value),/*#__PURE__*/_jsx(\"label\",{className:\"rate__label\",htmlFor:\"star-\".concat(el.value)})]},el.value);}),isValidationRating&&rating===0?/*#__PURE__*/_jsx(\"p\",{className:\"rate__message\",children:\"\\u041F\\u043E\\u0441\\u0442\\u0430\\u0432\\u044C\\u0442\\u0435 \\u043E\\u0446\\u0435\\u043D\\u043A\\u0443\"}):'']})]})]}),/*#__PURE__*/_jsx(\"label\",{className:\"form-review__label form-review__label--required\",htmlFor:\"adv\",children:\"\\u0414\\u043E\\u0441\\u0442\\u043E\\u0438\\u043D\\u0441\\u0442\\u0432\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-review__input\",id:\"adv\",type:\"text\",autoComplete:\"off\",value:adv,disabled:isReviewSending,onChange:function onChange(evt){setAdv(evt.currentTarget.value);setIsValidationAdv(false);},required:true,tabIndex:3}),/*#__PURE__*/_jsxs(\"p\",{className:isValidationAdv&&adv.length===0?'form-review__warning':'form-review__war',children:[\" \",isValidationAdv&&adv.length===0?'Заполните поле':'']}),/*#__PURE__*/_jsx(\"label\",{className:\"form-review__label form-review__label--required\",htmlFor:\"disadv\",children:\"\\u041D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0430\\u0442\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-review__input\",id:\"disadv\",type:\"text\",autoComplete:\"off\",value:disadv,disabled:isReviewSending,onChange:function onChange(evt){setDisadv(evt.currentTarget.value);setIsValidationDisadv(false);},required:true,tabIndex:4}),/*#__PURE__*/_jsxs(\"p\",{className:isValidationDisadv&&disadv.length===0?'form-review__warning':'form-review__war',children:[\" \",isValidationDisadv&&disadv.length===0?'Заполните поле':'']}),/*#__PURE__*/_jsx(\"label\",{className:\"form-review__label form-review__label--required\",htmlFor:\"comment\",children:\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"textarea\",{value:text,disabled:isReviewSending,onChange:function onChange(evt){setText(evt.currentTarget.value);setIsValidationText(false);},className:\"form-review__input form-review__input--textarea\",id:\"comment\",autoComplete:\"off\",required:true,tabIndex:5}),/*#__PURE__*/_jsxs(\"p\",{className:isValidationText&&text.length===0?'form-review__warning':'form-review__war',children:[\" \",isValidationText&&text.length===0?'Заполните поле':'']}),/*#__PURE__*/_jsx(\"button\",{className:\"button button--medium-20 form-review__button\",type:\"submit\",disabled:isReviewSending,onClick:function onClick(){return getValidation(true);},children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"modal__close-btn button-cross\",type:\"button\",\"aria-label\":\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",onClick:function onClick(){dispatch(setIsCommentModalOpened(false));startScroll();},children:[/*#__PURE__*/_jsx(\"span\",{className:\"button-cross__icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"modal__close-btn-interactive-area\"})]})]})]})})});}export default AddComments;","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/components/add-comments.tsx"],"names":["React","useState","RATING_VALUES","useAppDispatch","useAppSelector","sendCommentAction","sendComment","setIsCommentModalOpened","setIsDisconnect","setIsSuccessModalOpened","Pentoville","startScroll","AddComments","guitar","name","id","dispatch","isReviewSending","DATA","isDataSending","text","setText","userName","setUserName","adv","setAdv","disadv","setDisadv","rating","setRating","isValidationText","setIsValidationText","isValidationName","setIsValidationName","isValidationRating","setIsValidationRating","isValidationAdv","setIsValidationAdv","isValidationDisadv","setIsValidationDisadv","getValidation","val","ratingChangeHandler","userRating","onSuccessBtnClick","evt","preventDefault","navigator","onLine","comment","guitarId","advantage","disadvantage","currentTarget","value","length","map","el","Number","target"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { RATING_VALUES } from '../const';\nimport { useAppDispatch, useAppSelector } from '../hooks/hooks';\nimport { sendCommentAction } from '../store/api-actions';\nimport { sendComment, setIsCommentModalOpened, setIsDisconnect, setIsSuccessModalOpened } from '../store/guitar-data';\nimport type { Guitar } from '../types/types';\nimport Pentoville from 'pentonville';\nimport { startScroll } from '../utils';\n\ntype AddCommentsProps = {\n  guitar: Guitar;\n}\n\nfunction AddComments({ guitar }: AddCommentsProps): JSX.Element {\n  const { name, id } = guitar;\n  const dispatch = useAppDispatch();\n\n  const isReviewSending = useAppSelector(({ DATA }) => DATA.isDataSending);\n  const [text, setText] = useState('');\n  const [userName, setUserName] = useState('');\n  const [adv, setAdv] = useState('');\n  const [disadv, setDisadv] = useState('');\n  const [rating, setRating] = useState<number>(0);\n  const [isValidationText, setIsValidationText] = useState<boolean>(false);\n  const [isValidationName, setIsValidationName] = useState<boolean>(false);\n  const [isValidationRating, setIsValidationRating] = useState<boolean>(false);\n  const [isValidationAdv, setIsValidationAdv] = useState<boolean>(false);\n  const [isValidationDisadv, setIsValidationDisadv] = useState<boolean>(false);\n\n  const getValidation = (val: boolean | ((prevState: boolean) => boolean)) => {\n    setIsValidationText(val);\n    setIsValidationName(val);\n    setIsValidationRating(val);\n    setIsValidationAdv(val);\n    setIsValidationDisadv(val);\n  };\n\n  const ratingChangeHandler = (userRating: number) => {\n    setRating(userRating);\n  };\n\n  const onSuccessBtnClick = () => {\n    dispatch(setIsSuccessModalOpened(true));\n  };\n\n  return (\n    <Pentoville>\n      <div className=\"modal is-active modal--review modal-for-ui-kit\">\n        <div className=\"modal__wrapper\">\n          <div className=\"modal__overlay\"\n            onClick={() => {\n              dispatch(setIsCommentModalOpened(false));\n              startScroll();\n            }}\n          >\n          </div>\n          <div className=\"modal__content\">\n            <h2 className=\"modal__header modal__header--review title title--medium\">Оставить отзыв</h2>\n            <h3 className=\"modal__product-name title title--medium-20 title--uppercase\">{name}</h3>\n            <form className=\"form-review\" onSubmit={(evt: React.FormEvent<HTMLFormElement>) => {\n              evt.preventDefault();\n              dispatch(setIsDisconnect(navigator.onLine));\n              dispatch(sendComment(true));\n              dispatch(sendCommentAction({\n                comment: text,\n                guitarId: id,\n                rating: rating,\n                userName: userName,\n                advantage: adv,\n                disadvantage: disadv,\n              }));\n              if ( navigator.onLine) {\n                dispatch(setIsCommentModalOpened(false));\n                onSuccessBtnClick();\n              }\n            }}\n            >\n              <div className=\"form-review__wrapper\">\n                <div className=\"form-review__name-wrapper\">\n                  <label className=\"form-review__label form-review__label--required\" htmlFor=\"user-name\">Ваше Имя</label>\n                  <input className=\"form-review__input form-review__input--name\" id=\"user-name\" type=\"text\" autoComplete=\"off\" value={userName} disabled={isReviewSending}\n                    onChange={(evt: React.ChangeEvent<HTMLInputElement>) => {\n                      setUserName(evt.currentTarget.value);\n                      setIsValidationName(false);\n                    }} required autoFocus tabIndex={1}\n                  />\n                  <p className={isValidationName && userName.length === 0 ? 'form-review__warning' : 'form-review__war'} > {isValidationName && userName.length === 0 ? 'Заполните поле' : ''}</p>\n                </div>\n                <div><span className=\"form-review__label form-review__label--required\">Ваша Оценка</span>\n                  <div className=\"rate rate--reverse\" >\n                    {RATING_VALUES.map((el) => (\n                      <React.Fragment key={el.value}>\n                        <input className=\"visually-hidden\" key={el.value} id={`star-${el.value}`} type=\"radio\"\n                          name=\"rate\" value={el.value} checked={rating === el.value}\n                          onChange={(evt) => {\n                            setIsValidationRating(false);\n                            ratingChangeHandler(Number(evt.target.value));\n                          }} disabled={isReviewSending} required tabIndex={2}\n                        />\n                        <label className=\"rate__label\" htmlFor={`star-${el.value}`}>\n                        </label>\n                      </React.Fragment>\n                    ))}\n                    {isValidationRating && rating === 0 ? <p className=\"rate__message\">Поставьте оценку</p> : ''}\n                  </div>\n                </div>\n              </div>\n              <label className=\"form-review__label form-review__label--required\" htmlFor=\"adv\">Достоинства</label>\n              <input className=\"form-review__input\" id=\"adv\" type=\"text\" autoComplete=\"off\" value={adv} disabled={isReviewSending}\n                onChange={(evt: React.ChangeEvent<HTMLInputElement>) => {\n                  setAdv(evt.currentTarget.value);\n                  setIsValidationAdv(false);\n                }} required tabIndex={3}\n              />\n              <p className={isValidationAdv && adv.length === 0 ? 'form-review__warning' : 'form-review__war'} > {isValidationAdv && adv.length === 0 ? 'Заполните поле' : ''}</p>\n              <label className=\"form-review__label form-review__label--required\" htmlFor=\"disadv\">Недостатки</label>\n              <input className=\"form-review__input\" id=\"disadv\" type=\"text\" autoComplete=\"off\" value={disadv} disabled={isReviewSending}\n                onChange={(evt: React.ChangeEvent<HTMLInputElement>) => {\n                  setDisadv(evt.currentTarget.value);\n                  setIsValidationDisadv(false);\n                }} required tabIndex={4}\n              />\n              <p className={isValidationDisadv && disadv.length === 0 ? 'form-review__warning' : 'form-review__war'} > {isValidationDisadv && disadv.length === 0 ? 'Заполните поле' : ''}</p>\n              <label className=\"form-review__label form-review__label--required\" htmlFor=\"comment\">Комментарий</label>\n              <textarea value={text} disabled={isReviewSending}\n                onChange={(evt: React.ChangeEvent<HTMLTextAreaElement>) => {\n                  setText(evt.currentTarget.value);\n                  setIsValidationText(false);\n                }} className=\"form-review__input form-review__input--textarea\" id=\"comment\" autoComplete=\"off\" required tabIndex={5}\n              >\n              </textarea>\n              <p className={isValidationText && text.length === 0 ? 'form-review__warning' : 'form-review__war'} > {isValidationText && text.length === 0 ? 'Заполните поле' : ''}</p>\n              <button className=\"button button--medium-20 form-review__button\" type=\"submit\" disabled={isReviewSending} onClick={() => getValidation(true)}>Отправить отзыв</button>\n            </form>\n            <button className=\"modal__close-btn button-cross\" type=\"button\" aria-label=\"Закрыть\"\n              onClick={() => {\n                dispatch(setIsCommentModalOpened(false));\n                startScroll();\n              }}\n            >\n              <span className=\"button-cross__icon\"></span><span className=\"modal__close-btn-interactive-area\"></span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </Pentoville>\n  );\n}\n\nexport default AddComments;\n"]},"metadata":{},"sourceType":"module"}