{"ast":null,"code":"import _asyncToGenerator from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/regenerator/index.js\";import{createAsyncThunk}from'@reduxjs/toolkit';import{loadComments,loadGuitar,loadGuitars,sendComment}from'./guitar-data';import{errorHandle}from'../services/error-handle';import{APIRoute}from'../const';export var fetchGuitarsAction=createAsyncThunk('data/fetchGuitars',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_arg,_ref){var dispatch,api,_yield$api$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch=_ref.dispatch,api=_ref.extra;_context.prev=1;_context.next=4;return api.get(APIRoute.Guitars);case 4:_yield$api$get=_context.sent;data=_yield$api$get.data;dispatch(loadGuitars(data));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);errorHandle(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var fetchGuitarAction=createAsyncThunk('data/fetchGuitar',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(guitarId,_ref3){var dispatch,api,_yield$api$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch=_ref3.dispatch,api=_ref3.extra;_context2.prev=1;_context2.next=4;return api.get(\"\".concat(APIRoute.Guitar).concat(guitarId));case 4:_yield$api$get2=_context2.sent;data=_yield$api$get2.data;dispatch(loadGuitar(data));_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);errorHandle(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());export var fetchCommentsAction=createAsyncThunk('data/fetchComments',/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(guitarId,_ref5){var dispatch,api,_yield$api$get3,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch=_ref5.dispatch,api=_ref5.extra;_context3.prev=1;_context3.next=4;return api.get(\"\".concat(APIRoute.Guitar).concat(guitarId).concat(APIRoute.Comments));case 4:_yield$api$get3=_context3.sent;data=_yield$api$get3.data;dispatch(loadComments(data));_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);errorHandle(_context3.t0);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x5,_x6){return _ref6.apply(this,arguments);};}());export var sendCommentAction=createAsyncThunk('data/sendComment',/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref7,_ref8){var guitarId,userName,advantage,disadvantage,comment,rating,dispatch,api,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:guitarId=_ref7.guitarId,userName=_ref7.userName,advantage=_ref7.advantage,disadvantage=_ref7.disadvantage,comment=_ref7.comment,rating=_ref7.rating;dispatch=_ref8.dispatch,api=_ref8.extra;_context4.prev=2;data={guitarId:guitarId,userName:userName,advantage:advantage,disadvantage:disadvantage,comment:comment,rating:rating};_context4.next=6;return api.post(APIRoute.Comments,data);case 6:dispatch(sendComment(false));_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](2);errorHandle(_context4.t0);dispatch(sendComment(true));case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[2,9]]);}));return function(_x7,_x8){return _ref9.apply(this,arguments);};}());","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/store/api-actions.ts"],"names":["createAsyncThunk","loadComments","loadGuitar","loadGuitars","sendComment","errorHandle","APIRoute","fetchGuitarsAction","_arg","dispatch","api","extra","get","Guitars","data","fetchGuitarAction","guitarId","Guitar","fetchCommentsAction","Comments","sendCommentAction","userName","advantage","disadvantage","comment","rating","post"],"mappings":"6PAAA,OAASA,gBAAT,KAAiC,kBAAjC,CAEA,OAASC,YAAT,CAAuBC,UAAvB,CAAmCC,WAAnC,CAAgDC,WAAhD,KAAmE,eAAnE,CACA,OAASC,WAAT,KAA4B,0BAA5B,CACA,OAASC,QAAT,KAAyB,UAAzB,CAIA,MAAO,IAAMC,CAAAA,kBAAkB,CAAGP,gBAAgB,CAKhD,mBALgD,2FAMhD,iBAAOQ,IAAP,4JAAcC,QAAd,MAAcA,QAAd,CAA+BC,GAA/B,MAAwBC,KAAxB,uCAE2BD,CAAAA,GAAG,CAACE,GAAJ,CAAkBN,QAAQ,CAACO,OAA3B,CAF3B,qCAEYC,IAFZ,gBAEYA,IAFZ,CAGIL,QAAQ,CAACN,WAAW,CAACW,IAAD,CAAZ,CAAR,CAHJ,+EAKIT,WAAW,aAAX,CALJ,oEANgD,oEAA3C,CAgBP,MAAO,IAAMU,CAAAA,iBAAiB,CAAGf,gBAAgB,CAK/C,kBAL+C,2FAM/C,kBAAOgB,QAAP,kKAAkBP,QAAlB,OAAkBA,QAAlB,CAAmCC,GAAnC,OAA4BC,KAA5B,yCAE2BD,CAAAA,GAAG,CAACE,GAAJ,WAAmBN,QAAQ,CAACW,MAA5B,SAAqCD,QAArC,EAF3B,uCAEYF,IAFZ,iBAEYA,IAFZ,CAGIL,QAAQ,CAACP,UAAU,CAACY,IAAD,CAAX,CAAR,CAHJ,mFAKIT,WAAW,cAAX,CALJ,sEAN+C,qEAA1C,CAgBP,MAAO,IAAMa,CAAAA,mBAAmB,CAAGlB,gBAAgB,CAKjD,oBALiD,2FAMjD,kBAAOgB,QAAP,kKAAkBP,QAAlB,OAAkBA,QAAlB,CAAmCC,GAAnC,OAA4BC,KAA5B,yCAE2BD,CAAAA,GAAG,CAACE,GAAJ,WAAsBN,QAAQ,CAACW,MAA/B,SAAwCD,QAAxC,SAAmDV,QAAQ,CAACa,QAA5D,EAF3B,uCAEYL,IAFZ,iBAEYA,IAFZ,CAGIL,QAAQ,CAACR,YAAY,CAACa,IAAD,CAAb,CAAR,CAHJ,mFAKIT,WAAW,cAAX,CALJ,sEANiD,qEAA5C,CAgBP,MAAO,IAAMe,CAAAA,iBAAiB,CAAGpB,gBAAgB,CAK/C,kBAL+C,2FAM/C,iOAASgB,QAAT,OAASA,QAAT,CAAmBK,QAAnB,OAAmBA,QAAnB,CAA6BC,SAA7B,OAA6BA,SAA7B,CAAwCC,YAAxC,OAAwCA,YAAxC,CAAsDC,OAAtD,OAAsDA,OAAtD,CAA+DC,MAA/D,OAA+DA,MAA/D,CAA0EhB,QAA1E,OAA0EA,QAA1E,CAA2FC,GAA3F,OAAoFC,KAApF,kBAEUG,IAFV,CAEiB,CAAEE,QAAQ,CAARA,QAAF,CAAYK,QAAQ,CAARA,QAAZ,CAAsBC,SAAS,CAATA,SAAtB,CAAiCC,YAAY,CAAZA,YAAjC,CAA+CC,OAAO,CAAPA,OAA/C,CAAwDC,MAAM,CAANA,MAAxD,CAFjB,wBAGUf,CAAAA,GAAG,CAACgB,IAAJ,CAAoBpB,QAAQ,CAACa,QAA7B,CAAuCL,IAAvC,CAHV,QAIIL,QAAQ,CAACL,WAAW,CAAC,KAAD,CAAZ,CAAR,CAJJ,mFAMIC,WAAW,cAAX,CACAI,QAAQ,CAACL,WAAW,CAAC,IAAD,CAAZ,CAAR,CAPJ,sEAN+C,qEAA1C","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { Guitar, NewReview, Comment, AppDispatch, State } from '../types/types';\nimport { loadComments, loadGuitar, loadGuitars, sendComment } from './guitar-data';\nimport { errorHandle } from '../services/error-handle';\nimport { APIRoute } from '../const';\nimport { AxiosInstance } from 'axios';\n\n\nexport const fetchGuitarsAction = createAsyncThunk<void, undefined, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/fetchGuitars',\n  async (_arg, {dispatch, extra: api}) => {\n    try {\n      const { data } = await api.get<Guitar[]>(APIRoute.Guitars);\n      dispatch(loadGuitars(data));\n    } catch (error) {\n      errorHandle(error);\n    }\n  },\n);\n\nexport const fetchGuitarAction = createAsyncThunk<void, number, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/fetchGuitar',\n  async (guitarId, {dispatch, extra: api}) => {\n    try {\n      const { data } = await api.get<Guitar>(`${APIRoute.Guitar}${guitarId}`);\n      dispatch(loadGuitar(data));\n    } catch (error) {\n      errorHandle(error);\n    }\n  },\n);\n\nexport const fetchCommentsAction = createAsyncThunk<void, number, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/fetchComments',\n  async (guitarId, {dispatch, extra: api}) => {\n    try {\n      const { data } = await api.get<Comment[]>(`${APIRoute.Guitar}${guitarId}${APIRoute.Comments}`);\n      dispatch(loadComments(data));\n    } catch (error) {\n      errorHandle(error);\n    }\n  },\n);\n\nexport const sendCommentAction = createAsyncThunk<void, NewReview, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/sendComment',\n  async ({ guitarId, userName, advantage, disadvantage, comment, rating }, {dispatch, extra: api} ) => {\n    try {\n      const data = { guitarId, userName, advantage, disadvantage, comment, rating };\n      await api.post<NewReview>(APIRoute.Comments, data);\n      dispatch(sendComment(false));\n    } catch (error) {\n      errorHandle(error);\n      dispatch(sendComment(true));\n    }\n  },\n);\n"]},"metadata":{},"sourceType":"module"}