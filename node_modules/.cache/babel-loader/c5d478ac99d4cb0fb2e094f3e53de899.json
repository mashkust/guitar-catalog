{"ast":null,"code":"import _slicedToArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import PageHeader from'./page-header';import PageFooter from'./page-footer';import{AppRoute,VALIDATION_COUPON}from'../const';import{Link}from'react-router-dom';import BasketCard from'./basket-card';import{useAppDispatch,useAppSelector}from'../hooks/hooks';import{postCouponAction,postOrdersAction}from'../store/api-actions';import{setIsBasketRemoval,setIsCoupon,setIsDisconnect,setIsDiscount}from'../store/guitar-data';import BasketRemoval from'./basket-removal';import{startScroll}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";function BasketPage(){var boughtGuitars=useAppSelector(function(_ref){var DATA=_ref.DATA;return DATA.boughtGuitars;});var isGuitar=useAppSelector(function(_ref2){var DATA=_ref2.DATA;return DATA.isGuitar;});var isBasketRemoval=useAppSelector(function(_ref3){var DATA=_ref3.DATA;return DATA.isBasketRemoval;});var isDiscount=useAppSelector(function(_ref4){var DATA=_ref4.DATA;return DATA.isDiscount;});var isCoupon=useAppSelector(function(_ref5){var DATA=_ref5.DATA;return DATA.isCoupon;});var dispatch=useAppDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),coupon=_useState2[0],setCoupon=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isValidationCoupon=_useState4[0],setIsValidationCoupon=_useState4[1];var discount=isDiscount===null?0:isDiscount;document.onkeydown=function(evt){evt=evt||window.event;var isEscape=false;if('key'in evt){isEscape=evt.key==='Escape'||evt.key==='Esc';}if(isEscape){dispatch(setIsBasketRemoval(false));startScroll();}};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(PageHeader,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"page-content \",children:[isGuitar?isBasketRemoval&&/*#__PURE__*/_jsx(BasketRemoval,{guitar:isGuitar}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-content__title title title--bigger\",children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"breadcrumbs page-content__breadcrumbs page-content__breadcrumbs--on-cart-page\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumbs__item\",children:/*#__PURE__*/_jsx(Link,{className:\"link\",to:AppRoute.Page1,children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumbs__item\",children:/*#__PURE__*/_jsx(Link,{className:\"link\",to:AppRoute.Page1,children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumbs__item\",children:/*#__PURE__*/_jsx(\"a\",{className:\"link\",children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[boughtGuitars.length!==0?boughtGuitars.map(function(guitar){return/*#__PURE__*/_createElement(BasketCard,{guitar:guitar,key:guitar.id});}):'Корзина пуста',/*#__PURE__*/_jsxs(\"div\",{className:\"cart__footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart__coupon coupon\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title title--little coupon__title\",children:\"\\u041F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434 \\u043D\\u0430 \\u0441\\u043A\\u0438\\u0434\\u043A\\u0443\"}),/*#__PURE__*/_jsx(\"p\",{className:\"coupon__info\",children:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u043F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434, \\u0435\\u0441\\u043B\\u0438 \\u043E\\u043D \\u0443 \\u0432\\u0430\\u0441 \\u0435\\u0441\\u0442\\u044C.\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"coupon__form\",id:\"coupon-form\",onSubmit:function onSubmit(evt){evt.preventDefault();if(VALIDATION_COUPON.includes(coupon.toLowerCase())){dispatch(setIsCoupon(coupon.toLowerCase()));dispatch(setIsDisconnect(navigator.onLine));dispatch(postCouponAction({coupon:coupon.toLowerCase()}));}else{dispatch(setIsCoupon(null));dispatch(setIsDiscount(null));}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-input coupon__input\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"visually-hidden\",children:\"\\u041F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434\",id:\"coupon\",name:\"coupon\",value:coupon,onChange:function onChange(evt){if(evt.currentTarget.value.includes(' ')){setCoupon(evt.currentTarget.value.split(' ').join(''));}else{setCoupon(evt.currentTarget.value);}setIsValidationCoupon(false);}}),isValidationCoupon&&isCoupon!==null?/*#__PURE__*/_jsx(\"p\",{className:\"form-input__message form-input__message--success\",children:\" \\u041F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434 \\u043F\\u0440\\u0438\\u043D\\u044F\\u0442\"}):'',isValidationCoupon&&isCoupon===null?/*#__PURE__*/_jsx(\"p\",{className:\"form-input__message form-input__message--error\",children:\" \\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 \\u043F\\u0440\\u043E\\u043C\\u043E\\u043A\\u043E\\u0434\"}):'']}),/*#__PURE__*/_jsx(\"button\",{className:\"button button--big coupon__button\",onClick:function onClick(){if(coupon!==''){setIsValidationCoupon(true);}},children:\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart__total-info\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"cart__total-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cart__total-value-name\",children:\"\\u0412\\u0441\\u0435\\u0433\\u043E:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"cart__total-value\",children:[boughtGuitars.reduce(function(sum,elem){if(elem.quantity){return sum+elem.price*elem.quantity;}else{return sum+elem.price;}},0),\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"cart__total-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cart__total-value-name\",children:\"\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430:\"}),/*#__PURE__*/_jsxs(\"span\",{className:discount!==0?'cart__total-value cart__total-value--bonus':'cart__total-value ',children:[\" \",Math.fround(-0.01*discount*boughtGuitars.reduce(function(sum,elem){if(elem.quantity){return sum+elem.price*elem.quantity;}else{return sum+elem.price;}},0)),\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"cart__total-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cart__total-value-name\",children:\"\\u041A \\u043E\\u043F\\u043B\\u0430\\u0442\\u0435:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"cart__total-value cart__total-value--payment\",children:[Math.fround((1-0.01*discount)*boughtGuitars.reduce(function(sum,elem){if(elem.quantity){return sum+elem.price*elem.quantity;}else{return sum+elem.price;}},0)),\" \\u20BD\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button button--red button--big cart__order-button\",onClick:function onClick(){dispatch(postOrdersAction({guitarsIds:boughtGuitars.map(function(guitar){return guitar.id;}),coupon:isCoupon}));dispatch(setIsDisconnect(navigator.onLine));},disabled:boughtGuitars.length===0,children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"})]})]})]})]})]}),/*#__PURE__*/_jsx(PageFooter,{})]});}export default BasketPage;","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/components/basket-page.tsx"],"names":["React","useState","PageHeader","PageFooter","AppRoute","VALIDATION_COUPON","Link","BasketCard","useAppDispatch","useAppSelector","postCouponAction","postOrdersAction","setIsBasketRemoval","setIsCoupon","setIsDisconnect","setIsDiscount","BasketRemoval","startScroll","BasketPage","boughtGuitars","DATA","isGuitar","isBasketRemoval","isDiscount","isCoupon","dispatch","coupon","setCoupon","isValidationCoupon","setIsValidationCoupon","discount","document","onkeydown","evt","window","event","isEscape","key","Page1","length","map","guitar","id","preventDefault","includes","toLowerCase","navigator","onLine","currentTarget","value","split","join","reduce","sum","elem","quantity","price","Math","fround","guitarsIds"],"mappings":"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","sourcesContent":["import React, {useState } from 'react';\nimport PageHeader from './page-header';\nimport PageFooter from './page-footer';\nimport { AppRoute, VALIDATION_COUPON } from '../const';\nimport { Link } from 'react-router-dom';\nimport BasketCard from './basket-card';\nimport { useAppDispatch, useAppSelector } from '../hooks/hooks';\nimport { Guitar } from '../types/types';\nimport { postCouponAction, postOrdersAction } from '../store/api-actions';\nimport { setIsBasketRemoval, setIsCoupon, setIsDisconnect, setIsDiscount } from '../store/guitar-data';\nimport BasketRemoval from './basket-removal';\nimport { CouponTypes } from '../types/types';\nimport { startScroll } from '../utils';\n\nfunction BasketPage(): JSX.Element {\n  const boughtGuitars = useAppSelector(({ DATA }) => DATA.boughtGuitars);\n  const isGuitar = useAppSelector(({ DATA }) => DATA.isGuitar);\n  const isBasketRemoval = useAppSelector(({ DATA }) => DATA.isBasketRemoval);\n  const isDiscount = useAppSelector(({ DATA }) => DATA.isDiscount);\n  const isCoupon = useAppSelector(({ DATA }) => DATA.isCoupon);\n  const dispatch = useAppDispatch();\n  const [coupon, setCoupon] = useState<string>('');\n  const [isValidationCoupon, setIsValidationCoupon] = useState<boolean>(false);\n  const discount = isDiscount === null ? 0 : isDiscount;\n\n  document.onkeydown = function (evt) {\n    evt = evt || window.event;\n    let isEscape = false;\n    if ('key' in evt) {\n      isEscape = (evt.key === 'Escape' || evt.key === 'Esc');\n    }\n    if (isEscape) {\n      dispatch(setIsBasketRemoval(false));\n      startScroll();\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <PageHeader />\n      <main className=\"page-content \">\n        {isGuitar ? isBasketRemoval && <BasketRemoval guitar={isGuitar} /> : ''}\n        <div className=\"container\">\n          <h1 className=\"page-content__title title title--bigger\" >Корзина</h1>\n          <ul className=\"breadcrumbs page-content__breadcrumbs page-content__breadcrumbs--on-cart-page\">\n            <li className=\"breadcrumbs__item\"><Link className=\"link\" to={AppRoute.Page1}>Главная</Link>\n            </li>\n            <li className=\"breadcrumbs__item\"><Link className=\"link\" to={AppRoute.Page1}>Каталог</Link>\n            </li>\n            <li className=\"breadcrumbs__item\"><a className=\"link\">Корзина</a>\n            </li>\n          </ul>\n          <div className=\"cart\">\n            {boughtGuitars.length !== 0 ? boughtGuitars.map((guitar: Guitar) => (\n              <BasketCard {...{ guitar }} key={guitar.id} />)) : 'Корзина пуста'}\n            <div className=\"cart__footer\">\n              <div className=\"cart__coupon coupon\">\n                <h2 className=\"title title--little coupon__title\">Промокод на скидку</h2>\n                <p className=\"coupon__info\">Введите свой промокод, если он у вас есть.</p>\n                <form className=\"coupon__form\" id=\"coupon-form\"\n                  onSubmit={(evt: React.FormEvent<HTMLFormElement>) => {\n                    evt.preventDefault();\n                    if ( VALIDATION_COUPON.includes(coupon.toLowerCase() as CouponTypes)\n                    ) {\n                      dispatch(setIsCoupon(coupon.toLowerCase() as CouponTypes));\n                      dispatch((setIsDisconnect(navigator.onLine)));\n                      dispatch(postCouponAction({\n                        coupon: coupon.toLowerCase() as CouponTypes,\n                      }));\n                    }\n                    else {\n                      dispatch(setIsCoupon(null));\n                      dispatch(setIsDiscount(null));\n                    }\n                  }}\n                >\n                  <div className=\"form-input coupon__input\">\n                    <label className=\"visually-hidden\">Промокод</label>\n                    <input type=\"text\" placeholder=\"Введите промокод\" id=\"coupon\" name=\"coupon\" value={coupon}\n                      onChange={(evt: React.ChangeEvent<HTMLInputElement>) => {\n                        if (evt.currentTarget.value.includes(' ')) {\n                          setCoupon(evt.currentTarget.value.split(' ').join(''));\n                        }\n                        else {\n                          setCoupon(evt.currentTarget.value);\n                        }\n                        setIsValidationCoupon(false);\n                      }}\n                    />\n                    {isValidationCoupon && isCoupon !== null ? <p className=\"form-input__message form-input__message--success\"> Промокод принят</p> : ''}\n                    {isValidationCoupon && isCoupon === null ? <p className=\"form-input__message form-input__message--error\"> Неверный промокод</p> : ''}\n                  </div>\n                  <button className=\"button button--big coupon__button\"\n                    onClick={() => {\n                      if (coupon !== '') {\n                        setIsValidationCoupon(true);\n                      }\n                    }}\n                  >Применить\n                  </button>\n                </form>\n              </div>\n              <div className=\"cart__total-info\">\n                <p className=\"cart__total-item\"><span className=\"cart__total-value-name\">Всего:</span>\n                  <span className=\"cart__total-value\">{boughtGuitars.reduce((sum, elem) => {\n                    if (elem.quantity) { return sum + elem.price * elem.quantity; }\n                    else { return sum + elem.price; }\n                  }, 0)} ₽\n                  </span>\n                </p>\n                <p className=\"cart__total-item\"><span className=\"cart__total-value-name\">Скидка:</span>\n                  <span className= {discount !== 0 ? 'cart__total-value cart__total-value--bonus' : 'cart__total-value '}> { Math.fround(-0.01 * discount * boughtGuitars.reduce((sum, elem) => {\n                    if (elem.quantity) {\n                      return sum + elem.price * elem.quantity ;\n                    }\n                    else { return sum + elem.price; }\n                  }, 0))} ₽\n                  </span>\n                </p>\n                <p className=\"cart__total-item\"><span className=\"cart__total-value-name\">К оплате:</span>\n                  <span className=\"cart__total-value cart__total-value--payment\">{ Math.fround((1- 0.01 * discount) * boughtGuitars.reduce((sum, elem) => {\n                    if (elem.quantity) { return sum + elem.price * elem.quantity ; }\n                    else { return sum + elem.price; }\n                  }, 0))} ₽\n                  </span>\n                </p>\n                <button className=\"button button--red button--big cart__order-button\"\n                  onClick={() => {\n                    dispatch(postOrdersAction({\n                      guitarsIds: boughtGuitars.map((guitar: Guitar) => guitar.id),\n                      coupon: isCoupon,\n                    }));\n                    dispatch((setIsDisconnect(navigator.onLine)));\n                  }}\n                  disabled = {boughtGuitars.length === 0}\n                >Оформить заказ\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n      <PageFooter />\n    </React.Fragment>\n  );\n}\n\nexport default BasketPage;\n"]},"metadata":{},"sourceType":"module"}