{"ast":null,"code":"import _asyncToGenerator from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/regenerator/index.js\";import{createAsyncThunk}from'@reduxjs/toolkit';import{loadComments,loadGuitar,loadGuitars,sendComment,setIsDiscount}from'./guitar-data';import{errorHandle}from'../services/error-handle';import{APIRoute}from'../const';export var fetchGuitarsAction=createAsyncThunk('data/fetchGuitars',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_arg,_ref){var dispatch,api,_yield$api$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch=_ref.dispatch,api=_ref.extra;_context.prev=1;_context.next=4;return api.get(APIRoute.Guitars);case 4:_yield$api$get=_context.sent;data=_yield$api$get.data;dispatch(loadGuitars(data));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);errorHandle(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var fetchGuitarAction=createAsyncThunk('data/fetchGuitar',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(guitarId,_ref3){var dispatch,api,_yield$api$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch=_ref3.dispatch,api=_ref3.extra;_context2.prev=1;_context2.next=4;return api.get(\"\".concat(APIRoute.Guitar).concat(guitarId));case 4:_yield$api$get2=_context2.sent;data=_yield$api$get2.data;dispatch(loadGuitar(data));_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);errorHandle(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());export var fetchCommentsAction=createAsyncThunk('data/fetchComments',/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(guitarId,_ref5){var dispatch,api,_yield$api$get3,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch=_ref5.dispatch,api=_ref5.extra;_context3.prev=1;_context3.next=4;return api.get(\"\".concat(APIRoute.Guitar).concat(guitarId).concat(APIRoute.Comments));case 4:_yield$api$get3=_context3.sent;data=_yield$api$get3.data;dispatch(loadComments(data));_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);errorHandle(_context3.t0);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x5,_x6){return _ref6.apply(this,arguments);};}());export var sendCommentAction=createAsyncThunk('data/sendComment',/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref7,_ref8){var guitarId,userName,advantage,disadvantage,comment,rating,dispatch,api,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:guitarId=_ref7.guitarId,userName=_ref7.userName,advantage=_ref7.advantage,disadvantage=_ref7.disadvantage,comment=_ref7.comment,rating=_ref7.rating;dispatch=_ref8.dispatch,api=_ref8.extra;_context4.prev=2;data={guitarId:guitarId,userName:userName,advantage:advantage,disadvantage:disadvantage,comment:comment,rating:rating};_context4.next=6;return api.post(APIRoute.Comments,data);case 6:dispatch(sendComment(false));_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](2);errorHandle(_context4.t0);dispatch(sendComment(false));case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[2,9]]);}));return function(_x7,_x8){return _ref9.apply(this,arguments);};}());export var postOrdersAction=createAsyncThunk('data/postOrders',/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref10,_ref11){var guitarsIds,coupon,api,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:guitarsIds=_ref10.guitarsIds,coupon=_ref10.coupon;api=_ref11.extra;_context5.prev=2;data={guitarsIds:guitarsIds,coupon:coupon};_context5.next=6;return api.post(APIRoute.Orders,data);case 6:_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](2);errorHandle(_context5.t0);case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[2,8]]);}));return function(_x9,_x10){return _ref12.apply(this,arguments);};}());export var postCouponAction=createAsyncThunk('data/postCoupon',/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref13,_ref14){var coupon,dispatch,api,data,result;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:coupon=_ref13.coupon;dispatch=_ref14.dispatch,api=_ref14.extra;_context6.prev=2;data={coupon:coupon};_context6.next=6;return api.post(APIRoute.Coupon,data,{});case 6:result=_context6.sent;if(result.status>=200){dispatch(setIsDiscount(result.data));}_context6.next=13;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](2);errorHandle(_context6.t0);case 13:case\"end\":return _context6.stop();}}},_callee6,null,[[2,10]]);}));return function(_x11,_x12){return _ref15.apply(this,arguments);};}());","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/store/api-actions.ts"],"names":["createAsyncThunk","loadComments","loadGuitar","loadGuitars","sendComment","setIsDiscount","errorHandle","APIRoute","fetchGuitarsAction","_arg","dispatch","api","extra","get","Guitars","data","fetchGuitarAction","guitarId","Guitar","fetchCommentsAction","Comments","sendCommentAction","userName","advantage","disadvantage","comment","rating","post","postOrdersAction","guitarsIds","coupon","Orders","postCouponAction","Coupon","result","status"],"mappings":"6PAAA,OAASA,gBAAT,KAAiC,kBAAjC,CAEA,OAASC,YAAT,CAAuBC,UAAvB,CAAmCC,WAAnC,CAAgDC,WAAhD,CAA6DC,aAA7D,KAAkF,eAAlF,CACA,OAASC,WAAT,KAA4B,0BAA5B,CACA,OAASC,QAAT,KAAyB,UAAzB,CAIA,MAAO,IAAMC,CAAAA,kBAAkB,CAAGR,gBAAgB,CAKhD,mBALgD,2FAMhD,iBAAOS,IAAP,4JAAeC,QAAf,MAAeA,QAAf,CAAgCC,GAAhC,MAAyBC,KAAzB,uCAE2BD,CAAAA,GAAG,CAACE,GAAJ,CAAkBN,QAAQ,CAACO,OAA3B,CAF3B,qCAEYC,IAFZ,gBAEYA,IAFZ,CAGIL,QAAQ,CAACP,WAAW,CAACY,IAAD,CAAZ,CAAR,CAHJ,+EAKIT,WAAW,aAAX,CALJ,oEANgD,oEAA3C,CAgBP,MAAO,IAAMU,CAAAA,iBAAiB,CAAGhB,gBAAgB,CAK/C,kBAL+C,2FAM/C,kBAAOiB,QAAP,kKAAmBP,QAAnB,OAAmBA,QAAnB,CAAoCC,GAApC,OAA6BC,KAA7B,yCAE2BD,CAAAA,GAAG,CAACE,GAAJ,WAAmBN,QAAQ,CAACW,MAA5B,SAAqCD,QAArC,EAF3B,uCAEYF,IAFZ,iBAEYA,IAFZ,CAGIL,QAAQ,CAACR,UAAU,CAACa,IAAD,CAAX,CAAR,CAHJ,mFAKIT,WAAW,cAAX,CALJ,sEAN+C,qEAA1C,CAgBP,MAAO,IAAMa,CAAAA,mBAAmB,CAAGnB,gBAAgB,CAKjD,oBALiD,2FAMjD,kBAAOiB,QAAP,kKAAmBP,QAAnB,OAAmBA,QAAnB,CAAoCC,GAApC,OAA6BC,KAA7B,yCAE2BD,CAAAA,GAAG,CAACE,GAAJ,WAAsBN,QAAQ,CAACW,MAA/B,SAAwCD,QAAxC,SAAmDV,QAAQ,CAACa,QAA5D,EAF3B,uCAEYL,IAFZ,iBAEYA,IAFZ,CAGIL,QAAQ,CAACT,YAAY,CAACc,IAAD,CAAb,CAAR,CAHJ,mFAKIT,WAAW,cAAX,CALJ,sEANiD,qEAA5C,CAgBP,MAAO,IAAMe,CAAAA,iBAAiB,CAAGrB,gBAAgB,CAK/C,kBAL+C,2FAM/C,iOAASiB,QAAT,OAASA,QAAT,CAAmBK,QAAnB,OAAmBA,QAAnB,CAA6BC,SAA7B,OAA6BA,SAA7B,CAAwCC,YAAxC,OAAwCA,YAAxC,CAAsDC,OAAtD,OAAsDA,OAAtD,CAA+DC,MAA/D,OAA+DA,MAA/D,CAA2EhB,QAA3E,OAA2EA,QAA3E,CAA4FC,GAA5F,OAAqFC,KAArF,kBAEUG,IAFV,CAEiB,CAAEE,QAAQ,CAARA,QAAF,CAAYK,QAAQ,CAARA,QAAZ,CAAsBC,SAAS,CAATA,SAAtB,CAAiCC,YAAY,CAAZA,YAAjC,CAA+CC,OAAO,CAAPA,OAA/C,CAAwDC,MAAM,CAANA,MAAxD,CAFjB,wBAGUf,CAAAA,GAAG,CAACgB,IAAJ,CAAoBpB,QAAQ,CAACa,QAA7B,CAAuCL,IAAvC,CAHV,QAIIL,QAAQ,CAACN,WAAW,CAAC,KAAD,CAAZ,CAAR,CAJJ,mFAMIE,WAAW,cAAX,CACAI,QAAQ,CAACN,WAAW,CAAC,KAAD,CAAZ,CAAR,CAPJ,sEAN+C,qEAA1C,CAkBP,MAAO,IAAMwB,CAAAA,gBAAgB,CAAG5B,gBAAgB,CAK9C,iBAL8C,4FAM9C,oLAAS6B,UAAT,QAASA,UAAT,CAAqBC,MAArB,QAAqBA,MAArB,CAAuCnB,GAAvC,QAAgCC,KAAhC,kBAEUG,IAFV,CAEiB,CAAEc,UAAU,CAAVA,UAAF,CAAcC,MAAM,CAANA,MAAd,CAFjB,wBAGUnB,CAAAA,GAAG,CAACgB,IAAJ,CAAoBpB,QAAQ,CAACwB,MAA7B,CAAqChB,IAArC,CAHV,2FAKIT,WAAW,cAAX,CALJ,sEAN8C,uEAAzC,CAgBP,MAAO,IAAM0B,CAAAA,gBAAgB,CAAGhC,gBAAgB,CAK9C,iBAL8C,4FAM9C,yLAAS8B,MAAT,QAASA,MAAT,CAAoBpB,QAApB,QAAoBA,QAApB,CAAqCC,GAArC,QAA8BC,KAA9B,kBAEUG,IAFV,CAEiB,CAAEe,MAAM,CAANA,MAAF,CAFjB,wBAG0BnB,CAAAA,GAAG,CAACgB,IAAJ,CAAqBpB,QAAQ,CAAC0B,MAA9B,CAAsClB,IAAtC,CAA4C,EAA5C,CAH1B,QAGUmB,MAHV,gBAKI,GAAIA,MAAM,CAACC,MAAP,EAAiB,GAArB,CAA0B,CACxBzB,QAAQ,CAACL,aAAa,CAAC6B,MAAM,CAACnB,IAAR,CAAd,CAAR,CACD,CAPL,qFASIT,WAAW,cAAX,CATJ,uEAN8C,wEAAzC","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { Guitar, NewReview, Comment, AppDispatch, State, NewOrders, CouponPost } from '../types/types';\nimport { loadComments, loadGuitar, loadGuitars, sendComment, setIsDiscount } from './guitar-data';\nimport { errorHandle } from '../services/error-handle';\nimport { APIRoute } from '../const';\nimport { AxiosInstance } from 'axios';\n\n\nexport const fetchGuitarsAction = createAsyncThunk<void, undefined, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/fetchGuitars',\n  async (_arg, { dispatch, extra: api }) => {\n    try {\n      const { data } = await api.get<Guitar[]>(APIRoute.Guitars);\n      dispatch(loadGuitars(data));\n    } catch (error) {\n      errorHandle(error);\n    }\n  },\n);\n\nexport const fetchGuitarAction = createAsyncThunk<void, number, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/fetchGuitar',\n  async (guitarId, { dispatch, extra: api }) => {\n    try {\n      const { data } = await api.get<Guitar>(`${APIRoute.Guitar}${guitarId}`);\n      dispatch(loadGuitar(data));\n    } catch (error) {\n      errorHandle(error);\n    }\n  },\n);\n\nexport const fetchCommentsAction = createAsyncThunk<void, number, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/fetchComments',\n  async (guitarId, { dispatch, extra: api }) => {\n    try {\n      const { data } = await api.get<Comment[]>(`${APIRoute.Guitar}${guitarId}${APIRoute.Comments}`);\n      dispatch(loadComments(data));\n    } catch (error) {\n      errorHandle(error);\n    }\n  },\n);\n\nexport const sendCommentAction = createAsyncThunk<void, NewReview, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/sendComment',\n  async ({ guitarId, userName, advantage, disadvantage, comment, rating }, { dispatch, extra: api }) => {\n    try {\n      const data = { guitarId, userName, advantage, disadvantage, comment, rating };\n      await api.post<NewReview>(APIRoute.Comments, data);\n      dispatch(sendComment(false));\n    } catch (error) {\n      errorHandle(error);\n      dispatch(sendComment(false));\n    }\n  },\n);\n\nexport const postOrdersAction = createAsyncThunk<void, NewOrders, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/postOrders',\n  async ({ guitarsIds, coupon }, {extra: api }) => {\n    try {\n      const data = { guitarsIds, coupon };\n      await api.post<NewOrders>(APIRoute.Orders, data);\n    } catch (error) {\n      errorHandle(error);\n    }\n  },\n);\n\nexport const postCouponAction = createAsyncThunk<void, CouponPost, {\n  dispatch: AppDispatch,\n  state: State,\n  extra: AxiosInstance\n}>(\n  'data/postCoupon',\n  async ({ coupon }, {dispatch, extra: api }) => {\n    try {\n      const data = { coupon };\n      const result =  await api.post<CouponPost>(APIRoute.Coupon, data, {\n      });\n      if (result.status >= 200) {\n        dispatch(setIsDiscount(result.data));\n      }\n    } catch (error) {\n      errorHandle(error);\n    }\n  },\n);\n"]},"metadata":{},"sourceType":"module"}