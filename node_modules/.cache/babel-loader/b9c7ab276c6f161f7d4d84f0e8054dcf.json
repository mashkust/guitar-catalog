{"ast":null,"code":"import _toConsumableArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mashkust/react-starter-pack-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import{generatePath,Link,useParams}from'react-router-dom';import{AppRoute,STARS_MAX}from'../const';import{useAppDispatch,useAppSelector}from'../hooks/hooks';import{fetchCommentsAction,fetchGuitarAction}from'../store/api-actions';import LoadingScreen from'./loading-screen';import PageFooter from'./page-footer';import PageHeader from'./page-header';import GuitarTab from'./guitar-tab';import BasketCard from'./basket-card';import Comments from'./guitar-tabs/comments';import ShowMore from'./show-more';import AddComments from'./add-comments';import SuccessComments from'./success-comments';import{pasrePrice,startScroll,stopScroll}from'../utils';import{setIsCommentModalOpened,setIsSuccessModalOpened}from'../store/guitar-data';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GuitarPage(_ref){var tab=_ref.tab;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isBookingModalOpened=_useState2[0],setIsBookingModalOpened=_useState2[1];useEffect(function(){window.scrollTo({top:0});},[]);var onBookingBtnClick=function onBookingBtnClick(){setIsBookingModalOpened(true);};var onCommentBtnClick=function onCommentBtnClick(){dispatch(setIsCommentModalOpened(true));};var onUpBtnClick=function onUpBtnClick(evt){evt.preventDefault();if(mainRef&&mainRef.current){mainRef.current.scrollIntoView({block:'start'});}};var dispatch=useAppDispatch();var params=useParams();useEffect(function(){var guitarid=Number(params.id);if(guitarid){dispatch(fetchGuitarAction(guitarid));dispatch(fetchCommentsAction(guitarid));}},[dispatch,params]);var mainRef=useRef(null);var _useAppSelector=useAppSelector(function(_ref2){var DATA=_ref2.DATA;return DATA;}),guitar=_useAppSelector.guitar,comments=_useAppSelector.comments,isSuccessModalOpened=_useAppSelector.isSuccessModalOpened,isCommentModalOpened=_useAppSelector.isCommentModalOpened;var _useAppSelector2=useAppSelector(function(_ref3){var COMMENT=_ref3.COMMENT;return COMMENT;}),commentCardsCount=_useAppSelector2.commentCardsCount;document.onkeydown=function(evt){evt=evt||window.event;var isEscape=false;if('key'in evt){isEscape=evt.key==='Escape'||evt.key==='Esc';}if(isEscape){dispatch(setIsCommentModalOpened(false));setIsBookingModalOpened(false);dispatch(setIsSuccessModalOpened(false));startScroll();}};if(guitar){var _ref4=guitar,id=_ref4.id,name=_ref4.name,previewImg=_ref4.previewImg,price=_ref4.price,rating=_ref4.rating;var STARS=Math.ceil(rating);var NULL_STARS=STARS_MAX-STARS;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(PageHeader,{}),/*#__PURE__*/_jsx(\"main\",{ref:mainRef,className:isCommentModalOpened?'page-content overflow-hidden':'page-content',children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-content__title title title--bigger\",children:name}),/*#__PURE__*/_jsxs(\"ul\",{className:\"breadcrumbs page-content__breadcrumbs\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumbs__item\",children:/*#__PURE__*/_jsx(Link,{className:\"link\",to:AppRoute.Page1,children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumbs__item\",children:/*#__PURE__*/_jsx(Link,{className:\"link\",to:AppRoute.Page1,children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumbs__item\",children:/*#__PURE__*/_jsx(Link,{to:generatePath(AppRoute.Details,{id:String(id)}),className:\"link\",children:name})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-container\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"product-container__img\",src:\"img/content/\".concat(previewImg.length&&previewImg.slice(0).substring(4)),srcSet:\"img/content/\".concat(previewImg.length&&previewImg.slice(0).substring(4,previewImg.length-4),\"@2x.jpg 2x\"),width:\"90\",height:\"235\",alt:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-container__info-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product-container__title title title--big title--uppercase\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"rate product-container__rating\",children:[_toConsumableArray(Array(STARS)).map(function(){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"svg\",{width:\"14\",height:\"14\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"use\",{href:\"#icon-full-star\"})})},Math.random());}),_toConsumableArray(Array(NULL_STARS)).map(function(){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"svg\",{width:\"14\",height:\"14\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"use\",{href:\"#icon-star\"})})},Math.random());}),/*#__PURE__*/_jsxs(\"p\",{className:\"visually-hidden\",children:[\"\\u041E\\u0446\\u0435\\u043D\\u043A\\u0430 \",rating]}),/*#__PURE__*/_jsx(\"p\",{className:\"rate__count\",children:comments[0]?comments.length:''})]}),/*#__PURE__*/_jsx(GuitarTab,{tab:tab,guitar:guitar})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-container__price-wrapper\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"product-container__price-info product-container__price-info--title\",children:\"\\u0426\\u0435\\u043D\\u0430:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-container__price-info product-container__price-info--value\",children:[pasrePrice(price),\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"button button--red button--big product-container__button\",onClick:function onClick(){onBookingBtnClick();stopScroll();},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]}),isBookingModalOpened&&/*#__PURE__*/_jsx(BasketCard,{guitar:guitar,setIsBookingModalOpened:setIsBookingModalOpened})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"reviews\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"reviews__title title title--bigger\",children:\"\\u041E\\u0442\\u0437\\u044B\\u0432\\u044B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button button--red-border button--big reviews__sumbit-button\",onClick:function onClick(){onCommentBtnClick();stopScroll();},children:\"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"}),isCommentModalOpened&&/*#__PURE__*/_jsx(AddComments,{guitar:guitar}),isSuccessModalOpened&&/*#__PURE__*/_jsx(SuccessComments,{}),Array.from(comments).slice(0,commentCardsCount).map(function(comment){return/*#__PURE__*/_jsx(Comments,{someComment:comment},comment.id);}),comments.length>commentCardsCount?/*#__PURE__*/_jsx(ShowMore,{}):'',/*#__PURE__*/_jsx(\"button\",{style:{zIndex:10},className:\"button button--up button--red-border button--big reviews__up-button\",onClick:onUpBtnClick,children:\"\\u041D\\u0430\\u0432\\u0435\\u0440\\u0445\"})]})]})}),/*#__PURE__*/_jsx(PageFooter,{})]});}return/*#__PURE__*/_jsx(LoadingScreen,{});}export default GuitarPage;","map":{"version":3,"sources":["/Users/mashkust/react-starter-pack-main/src/components/guitar-page.tsx"],"names":["React","useEffect","useRef","useState","generatePath","Link","useParams","AppRoute","STARS_MAX","useAppDispatch","useAppSelector","fetchCommentsAction","fetchGuitarAction","LoadingScreen","PageFooter","PageHeader","GuitarTab","BasketCard","Comments","ShowMore","AddComments","SuccessComments","pasrePrice","startScroll","stopScroll","setIsCommentModalOpened","setIsSuccessModalOpened","GuitarPage","tab","isBookingModalOpened","setIsBookingModalOpened","window","scrollTo","top","onBookingBtnClick","onCommentBtnClick","dispatch","onUpBtnClick","evt","preventDefault","mainRef","current","scrollIntoView","block","params","guitarid","Number","id","DATA","guitar","comments","isSuccessModalOpened","isCommentModalOpened","COMMENT","commentCardsCount","document","onkeydown","event","isEscape","key","name","previewImg","price","rating","STARS","Math","ceil","NULL_STARS","Page1","Details","String","length","slice","substring","Array","map","random","from","comment","zIndex"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState} from 'react';\nimport type { MouseEvent } from 'react';\nimport { generatePath, Link, useParams } from 'react-router-dom';\nimport { AppRoute, STARS_MAX } from '../const';\nimport { useAppDispatch, useAppSelector } from '../hooks/hooks';\nimport { fetchCommentsAction, fetchGuitarAction } from '../store/api-actions';\nimport { Guitar, Comment } from '../types/types';\nimport LoadingScreen from './loading-screen';\nimport PageFooter from './page-footer';\nimport PageHeader from './page-header';\nimport GuitarTab from './guitar-tab';\nimport BasketCard from './basket-card';\nimport Comments from './guitar-tabs/comments';\nimport ShowMore from './show-more';\nimport AddComments from './add-comments';\nimport SuccessComments from './success-comments';\nimport { pasrePrice, startScroll, stopScroll } from '../utils';\nimport {setIsCommentModalOpened, setIsSuccessModalOpened } from '../store/guitar-data';\n\ntype GuitarPageProps = {\n  tab: boolean,\n}\n\nfunction GuitarPage({ tab }: GuitarPageProps): JSX.Element {\n  const [isBookingModalOpened, setIsBookingModalOpened] = useState<boolean>(false);\n\n  useEffect(() => {\n    window.scrollTo({ top: 0 });\n  }, []);\n\n  const onBookingBtnClick = () => {\n    setIsBookingModalOpened(true);\n  };\n\n  const onCommentBtnClick = () => {\n    dispatch(setIsCommentModalOpened(true));\n  };\n\n  const onUpBtnClick = (evt: MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    if (mainRef && mainRef.current) {\n      mainRef.current.scrollIntoView({ block: 'start' });\n    }\n  };\n\n  const dispatch = useAppDispatch();\n  const params = useParams();\n\n  useEffect(() => {\n    const guitarid = Number(params.id);\n    if (guitarid) {\n      dispatch(fetchGuitarAction(guitarid));\n      dispatch(fetchCommentsAction(guitarid));\n    }\n  }, [dispatch, params]);\n\n  const mainRef = useRef<HTMLElement | null>(null);\n\n  const { guitar, comments, isSuccessModalOpened, isCommentModalOpened} = useAppSelector(({ DATA }) => DATA);\n  const { commentCardsCount } = useAppSelector(({ COMMENT }) => COMMENT);\n\n\n  document.onkeydown = function(evt) {\n    evt = evt || window.event;\n    let isEscape = false;\n    if ('key' in evt) {\n      isEscape = (evt.key === 'Escape' || evt.key === 'Esc');\n    }\n    if (isEscape) {\n      dispatch(setIsCommentModalOpened(false));\n      setIsBookingModalOpened(false);\n      dispatch(setIsSuccessModalOpened(false));\n      startScroll();\n    }\n  };\n\n  if (guitar) {\n    const { id, name, previewImg, price, rating} = guitar as Guitar;\n    const STARS = Math.ceil(rating);\n    const NULL_STARS = STARS_MAX - STARS;\n    return (\n      <React.Fragment>\n        <PageHeader />\n        <main ref={mainRef} className={isCommentModalOpened  ? 'page-content overflow-hidden' : 'page-content'} >\n          <div className=\"container\">\n            <h1 className=\"page-content__title title title--bigger\">{name}</h1>\n            <ul className=\"breadcrumbs page-content__breadcrumbs\">\n              <li className=\"breadcrumbs__item\"><Link className=\"link\" to={AppRoute.Page1}>Главная</Link>\n              </li>\n              <li className=\"breadcrumbs__item\"><Link className=\"link\" to={AppRoute.Page1}>Каталог</Link>\n              </li>\n              <li className=\"breadcrumbs__item\"><Link to={generatePath(AppRoute.Details, { id: String(id) })} className=\"link\">{name}</Link>\n              </li>\n            </ul>\n            <div className=\"product-container\"><img className=\"product-container__img\" src={`img/content/${previewImg.length && previewImg.slice(0).substring(4)}`} srcSet={`img/content/${previewImg.length && previewImg.slice(0).substring(4, previewImg.length - 4)}@2x.jpg 2x`} width=\"90\" height=\"235\" alt={name} />\n              <div className=\"product-container__info-wrapper\">\n                <h2 className=\"product-container__title title title--big title--uppercase\">{name}</h2>\n                <div className=\"rate product-container__rating\">\n                  {\n                    [...Array(STARS)].map(() => (\n                      <React.Fragment key={Math.random()}>\n                        <svg width=\"14\" height=\"14\" aria-hidden=\"true\">\n                          <use href=\"#icon-full-star\"></use>\n                        </svg>\n                      </React.Fragment>\n                    ))\n                  }\n                  {\n                    [...Array(NULL_STARS)].map(() => (\n                      <React.Fragment key={Math.random()}>\n                        <svg width=\"14\" height=\"14\" aria-hidden=\"true\">\n                          <use href=\"#icon-star\"></use>\n                        </svg>\n                      </React.Fragment>\n                    ))\n                  }\n                  <p className=\"visually-hidden\">Оценка {rating}</p>\n                  <p className=\"rate__count\">{comments[0] ? comments.length : ''}</p>\n                </div>\n                <GuitarTab tab={tab} guitar={guitar} />\n              </div>\n              <div className=\"product-container__price-wrapper\">\n                <p className=\"product-container__price-info product-container__price-info--title\">Цена:</p>\n                <p className=\"product-container__price-info product-container__price-info--value\">{pasrePrice(price)} ₽</p>\n                <button className=\"button button--red button--big product-container__button\"\n                  onClick={() => {\n                    onBookingBtnClick();\n                    stopScroll();\n                  }}\n                >\n                  Добавить в корзину\n                </button>\n              </div>\n              {isBookingModalOpened && <BasketCard guitar={guitar} setIsBookingModalOpened={setIsBookingModalOpened} />}\n            </div>\n            <section className=\"reviews\">\n              <h3 className=\"reviews__title title title--bigger\">Отзывы</h3>\n              <button className=\"button button--red-border button--big reviews__sumbit-button\"\n                onClick={() => {\n                  onCommentBtnClick();\n                  stopScroll();\n                }}\n              >Оставить отзыв\n              </button>\n              {isCommentModalOpened && <AddComments guitar={guitar} />}\n              {isSuccessModalOpened && <SuccessComments />}\n              {Array.from(comments).slice(0, commentCardsCount).map((comment: Comment) => (\n                <Comments someComment={comment} key={comment.id} />))}\n              {comments.length > commentCardsCount ? <ShowMore /> : ''}\n              <button style={{ zIndex: 10 }} className=\"button button--up button--red-border button--big reviews__up-button\" onClick={onUpBtnClick}>Наверх</button>\n            </section>\n          </div>\n        </main>\n        <PageFooter />\n      </React.Fragment>\n    );\n  }\n  return <LoadingScreen />;\n}\n\nexport default GuitarPage;\n"]},"metadata":{},"sourceType":"module"}